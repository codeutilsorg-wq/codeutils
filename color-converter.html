<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Converter - Code Utils</title>
    <meta name="description" content="Free color converter. Convert colors between HEX, RGB, HSL, and CMYK formats. Live color preview.">
    <meta name="keywords" content="color converter, hex to rgb, rgb to hex, hsl converter, color picker">
    <link rel="canonical" href="https://codeutils.org/color-converter">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/color-converter">
    <meta property="og:title" content="Color Converter - Code Utils">
    <meta property="og:description" content="Convert colors between HEX, RGB, HSL, and CMYK.">
    <meta property="og:image" content="https://codeutils.org/images/og/color-converter.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Color Converter - Free online color conversion tool">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Color Converter - Code Utils">
    <meta name="twitter:description" content="Convert colors between HEX, RGB, HSL, and CMYK formats.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/color-converter.png">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RPHPBJ4291');
    </script>

    <link rel="stylesheet" href="css/common.min.css">
    <style>
        .picker-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }
        .picker-section h3 {
            margin: 0 0 var(--spacing-sm);
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .picker-layout {
            display: grid;
            grid-template-columns: 1fr 120px;
            gap: var(--spacing-md);
        }
        .picker-main {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        .color-area-wrapper {
            position: relative;
            width: 100%;
            height: 200px;
            border-radius: var(--radius);
            overflow: hidden;
            cursor: crosshair;
            border: 1px solid var(--border);
        }
        .color-area {
            position: absolute;
            inset: 0;
        }
        .color-area-white {
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, #fff, transparent);
        }
        .color-area-black {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, #000, transparent);
        }
        .color-cursor {
            position: absolute;
            width: 16px;
            height: 16px;
            border: 2px solid #fff;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #000, inset 0 0 0 1px #000;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        .hue-slider-wrapper {
            position: relative;
            width: 100%;
            height: 20px;
            border-radius: var(--radius);
            overflow: hidden;
            cursor: pointer;
            border: 1px solid var(--border);
        }
        .hue-slider {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right,
                hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%),
                hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(360, 100%, 50%));
        }
        .hue-cursor {
            position: absolute;
            top: 0;
            width: 6px;
            height: 100%;
            background: #fff;
            border: 1px solid #000;
            transform: translateX(-50%);
            pointer-events: none;
        }
        .picker-preview {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        .color-preview {
            flex: 1;
            min-height: 120px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background: #3b82f6;
        }
        .native-picker-wrapper {
            position: relative;
        }
        .native-picker-wrapper label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-align: center;
        }
        .native-picker {
            width: 100%;
            height: 36px;
            cursor: pointer;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0;
        }
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }
        .color-input-group {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
        }
        .color-input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: var(--spacing-xs);
            color: var(--primary);
        }
        .color-input-group input {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-mono);
        }
        .color-input-group .hint {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }
        .copy-btn {
            margin-top: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: 0.75rem;
        }
        @media (max-width: 600px) {
            .picker-layout {
                grid-template-columns: 1fr;
            }
            .color-area-wrapper {
                height: 160px;
            }
            .picker-preview {
                flex-direction: row;
            }
            .color-preview {
                min-height: 80px;
                flex: 1;
            }
            .native-picker-wrapper {
                width: 80px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
            <h2 style="margin-bottom: var(--spacing-xs); color: var(--primary);">Color Converter</h2>
            <p style="margin: 0; color: var(--text-secondary);">Convert colors between different formats.</p>
        </div>

        <div class="picker-section">
            <h3>Select a Color</h3>
            <div class="picker-layout">
                <div class="picker-main">
                    <div class="color-area-wrapper" id="colorArea">
                        <div class="color-area" id="colorAreaBg"></div>
                        <div class="color-area-white"></div>
                        <div class="color-area-black"></div>
                        <div class="color-cursor" id="colorCursor"></div>
                    </div>
                    <div class="hue-slider-wrapper" id="hueSlider">
                        <div class="hue-slider"></div>
                        <div class="hue-cursor" id="hueCursor"></div>
                    </div>
                </div>
                <div class="picker-preview">
                    <div class="color-preview" id="colorPreview"></div>
                    <div class="native-picker-wrapper">
                        <label>System Picker</label>
                        <input type="color" id="colorPicker" class="native-picker" value="#3b82f6" onchange="fromPicker()">
                    </div>
                </div>
            </div>
        </div>

        <div class="color-grid">
            <div class="color-input-group">
                <label>HEX</label>
                <input type="text" id="hexInput" value="#3B82F6" placeholder="#RRGGBB" oninput="fromHex()">
                <button class="btn btn-outline btn-sm copy-btn" onclick="copy('hexInput')">Copy</button>
                <div class="hint">Format: #RRGGBB or #RGB</div>
            </div>
            <div class="color-input-group">
                <label>RGB</label>
                <input type="text" id="rgbInput" value="rgb(59, 130, 246)" placeholder="rgb(R, G, B)" oninput="fromRgb()">
                <button class="btn btn-outline btn-sm copy-btn" onclick="copy('rgbInput')">Copy</button>
                <div class="hint">Format: rgb(0-255, 0-255, 0-255)</div>
            </div>
            <div class="color-input-group">
                <label>HSL</label>
                <input type="text" id="hslInput" value="hsl(217, 91%, 60%)" placeholder="hsl(H, S%, L%)" oninput="fromHsl()">
                <button class="btn btn-outline btn-sm copy-btn" onclick="copy('hslInput')">Copy</button>
                <div class="hint">Format: hsl(0-360, 0-100%, 0-100%)</div>
            </div>
            <div class="color-input-group">
                <label>CMYK</label>
                <input type="text" id="cmykInput" value="cmyk(76%, 47%, 0%, 4%)" placeholder="cmyk(C%, M%, Y%, K%)" oninput="fromCmyk()">
                <button class="btn btn-outline btn-sm copy-btn" onclick="copy('cmykInput')">Copy</button>
                <div class="hint">Format: cmyk(0-100%, 0-100%, 0-100%, 0-100%)</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="randomColor()">Random Color</button>
            <button class="btn btn-secondary" onclick="copyAll()">Copy All Formats</button>
        </div>

        <div id="message" class="message"></div>

        <div class="related-tools">
            <h3>Related Tools</h3>
            <ul class="related-tools-list">
                <li><a href="color-picker.html">Color Picker</a></li>
                <li><a href="gradient-generator.html">Gradient Generator</a></li>
                <li><a href="color-palette.html">Color Palette</a></li>
                <li><a href="number-converter.html">Number Converter</a></li>
            </ul>
        </div>

        <div class="info-section">
            <h2>About Color Converter</h2>
            <p>This tool converts colors between different color models used in web design and print.</p>

            <h3>Color Formats</h3>
            <ul>
                <li><strong>HEX:</strong> Hexadecimal format used in CSS (#RRGGBB)</li>
                <li><strong>RGB:</strong> Red, Green, Blue (0-255 each)</li>
                <li><strong>HSL:</strong> Hue, Saturation, Lightness</li>
                <li><strong>CMYK:</strong> Cyan, Magenta, Yellow, Key (Black) - for print</li>
            </ul>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
        <p>Free developer utilities - 100% client-side processing</p>
    </footer>

    <script src="js/common.min.js"></script>
    <script>
        CodeUtils.RecentTools.add({
            id: 'color-converter',
            name: 'Color Converter',
            url: 'color-converter.html'
        });

        CodeUtils.Message.init('message');

        // State - use HSV for visual picker, RGB for conversions
        let hue = 217;
        let saturation = 76;
        let brightness = 96;

        // Elements
        const colorArea = document.getElementById('colorArea');
        const colorAreaBg = document.getElementById('colorAreaBg');
        const colorCursor = document.getElementById('colorCursor');
        const hueSlider = document.getElementById('hueSlider');
        const hueCursor = document.getElementById('hueCursor');

        // Color conversion functions
        function hsvToRgb(h, s, v) {
            s /= 100;
            v /= 100;
            const c = v * s;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = v - c;
            let r, g, b;

            if (h < 60) { r = c; g = x; b = 0; }
            else if (h < 120) { r = x; g = c; b = 0; }
            else if (h < 180) { r = 0; g = c; b = x; }
            else if (h < 240) { r = 0; g = x; b = c; }
            else if (h < 300) { r = x; g = 0; b = c; }
            else { r = c; g = 0; b = x; }

            return {
                r: Math.round((r + m) * 255),
                g: Math.round((g + m) * 255),
                b: Math.round((b + m) * 255)
            };
        }

        function rgbToHsv(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            const d = max - min;
            let h, s, v = max;

            s = max === 0 ? 0 : d / max;

            if (max === min) {
                h = 0;
            } else {
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return { h: h * 360, s: s * 100, v: v * 100 };
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();
        }

        function hexToRgb(hex) {
            hex = hex.replace('#', '');
            if (hex.length === 3) {
                hex = hex.split('').map(c => c + c).join('');
            }
            return {
                r: parseInt(hex.substr(0, 2), 16),
                g: parseInt(hex.substr(2, 2), 16),
                b: parseInt(hex.substr(4, 2), 16)
            };
        }

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }
            return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
        }

        function hslToRgb(h, s, l) {
            h /= 360; s /= 100; l /= 100;
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
        }

        function rgbToCmyk(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const k = 1 - Math.max(r, g, b);
            if (k === 1) return { c: 0, m: 0, y: 0, k: 100 };
            return {
                c: Math.round((1 - r - k) / (1 - k) * 100),
                m: Math.round((1 - g - k) / (1 - k) * 100),
                y: Math.round((1 - b - k) / (1 - k) * 100),
                k: Math.round(k * 100)
            };
        }

        function cmykToRgb(c, m, y, k) {
            c /= 100; m /= 100; y /= 100; k /= 100;
            return {
                r: Math.round(255 * (1 - c) * (1 - k)),
                g: Math.round(255 * (1 - m) * (1 - k)),
                b: Math.round(255 * (1 - y) * (1 - k))
            };
        }

        // Update all displays
        function updateAllInputs() {
            const rgb = hsvToRgb(hue, saturation, brightness);
            const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            const cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);

            // Update inputs
            document.getElementById('hexInput').value = hex;
            document.getElementById('rgbInput').value = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
            document.getElementById('hslInput').value = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
            document.getElementById('cmykInput').value = `cmyk(${cmyk.c}%, ${cmyk.m}%, ${cmyk.y}%, ${cmyk.k}%)`;

            // Update preview
            document.getElementById('colorPreview').style.background = hex;
            document.getElementById('colorPicker').value = hex;
            colorAreaBg.style.background = `hsl(${hue}, 100%, 50%)`;

            // Update cursors
            colorCursor.style.left = `${saturation}%`;
            colorCursor.style.top = `${100 - brightness}%`;
            hueCursor.style.left = `${(hue / 360) * 100}%`;
        }

        // Set HSV from RGB
        function setFromRgb(r, g, b) {
            const hsv = rgbToHsv(r, g, b);
            hue = hsv.h;
            saturation = hsv.s;
            brightness = hsv.v;
            updateAllInputs();
        }

        // Color area interaction
        let isDraggingColor = false;

        function handleColorArea(e) {
            const rect = colorArea.getBoundingClientRect();
            let x = (e.clientX - rect.left) / rect.width;
            let y = (e.clientY - rect.top) / rect.height;

            x = Math.max(0, Math.min(1, x));
            y = Math.max(0, Math.min(1, y));

            saturation = x * 100;
            brightness = (1 - y) * 100;
            updateAllInputs();
        }

        colorArea.addEventListener('mousedown', (e) => {
            isDraggingColor = true;
            handleColorArea(e);
        });

        colorArea.addEventListener('touchstart', (e) => {
            isDraggingColor = true;
            handleColorArea(e.touches[0]);
            e.preventDefault();
        });

        // Hue slider interaction
        let isDraggingHue = false;

        function handleHueSlider(e) {
            const rect = hueSlider.getBoundingClientRect();
            let x = (e.clientX - rect.left) / rect.width;
            x = Math.max(0, Math.min(1, x));
            hue = x * 360;
            updateAllInputs();
        }

        hueSlider.addEventListener('mousedown', (e) => {
            isDraggingHue = true;
            handleHueSlider(e);
        });

        hueSlider.addEventListener('touchstart', (e) => {
            isDraggingHue = true;
            handleHueSlider(e.touches[0]);
            e.preventDefault();
        });

        // Global mouse/touch events
        document.addEventListener('mousemove', (e) => {
            if (isDraggingColor) handleColorArea(e);
            if (isDraggingHue) handleHueSlider(e);
        });

        document.addEventListener('mouseup', () => {
            isDraggingColor = false;
            isDraggingHue = false;
        });

        document.addEventListener('touchmove', (e) => {
            if (isDraggingColor) {
                handleColorArea(e.touches[0]);
                e.preventDefault();
            }
            if (isDraggingHue) {
                handleHueSlider(e.touches[0]);
                e.preventDefault();
            }
        });

        document.addEventListener('touchend', () => {
            isDraggingColor = false;
            isDraggingHue = false;
        });

        // Input handlers
        function fromPicker() {
            const hex = document.getElementById('colorPicker').value;
            const rgb = hexToRgb(hex);
            setFromRgb(rgb.r, rgb.g, rgb.b);
        }

        function fromHex() {
            const hex = document.getElementById('hexInput').value.trim();
            if (/^#?([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(hex)) {
                const rgb = hexToRgb(hex);
                setFromRgb(rgb.r, rgb.g, rgb.b);
            }
        }

        function fromRgb() {
            const match = document.getElementById('rgbInput').value.match(/(\d+)/g);
            if (match && match.length >= 3) {
                setFromRgb(
                    Math.min(255, parseInt(match[0])),
                    Math.min(255, parseInt(match[1])),
                    Math.min(255, parseInt(match[2]))
                );
            }
        }

        function fromHsl() {
            const match = document.getElementById('hslInput').value.match(/(\d+)/g);
            if (match && match.length >= 3) {
                const rgb = hslToRgb(
                    parseInt(match[0]) % 360,
                    Math.min(100, parseInt(match[1])),
                    Math.min(100, parseInt(match[2]))
                );
                setFromRgb(rgb.r, rgb.g, rgb.b);
            }
        }

        function fromCmyk() {
            const match = document.getElementById('cmykInput').value.match(/(\d+)/g);
            if (match && match.length >= 4) {
                const rgb = cmykToRgb(
                    Math.min(100, parseInt(match[0])),
                    Math.min(100, parseInt(match[1])),
                    Math.min(100, parseInt(match[2])),
                    Math.min(100, parseInt(match[3]))
                );
                setFromRgb(rgb.r, rgb.g, rgb.b);
            }
        }

        function randomColor() {
            hue = Math.random() * 360;
            saturation = 50 + Math.random() * 50;
            brightness = 50 + Math.random() * 50;
            updateAllInputs();
            CodeUtils.Message.success('Random color generated!');
        }

        function copy(inputId) {
            const value = document.getElementById(inputId).value;
            CodeUtils.Clipboard.copy(value);
            CodeUtils.Message.success('Copied!');
        }

        function copyAll() {
            const all = `HEX: ${document.getElementById('hexInput').value}
RGB: ${document.getElementById('rgbInput').value}
HSL: ${document.getElementById('hslInput').value}
CMYK: ${document.getElementById('cmykInput').value}`;
            CodeUtils.Clipboard.copy(all);
            CodeUtils.Message.success('All formats copied!');
        }

        // Initialize
        updateAllInputs();
    </script>
</body>
</html>
