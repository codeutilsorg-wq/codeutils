<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL: Apply theme immediately to prevent flash -->
    <script>
        (function() {
            const theme = localStorage.getItem('codeutils-theme');
            if (theme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free PDF Compressor | Reduce PDF File Size Online - Code Utils</title>
    <meta name="description"
        content="Compress PDF files to reduce size. Free online PDF compressor. Reduce file size while maintaining quality. 100% private - no uploads required.">
    <link rel="canonical" href="https://codeutils.org/compress-pdf">

    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#3498db">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/compress-pdf">
    <meta property="og:title" content="Free PDF Compressor - Code Utils">
    <meta property="og:description"
        content="Compress PDF files to reduce size instantly. Free online PDF compressor with 100% private client-side processing.">
    <meta property="og:image" content="https://codeutils.org/images/og/compress-pdf.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Compress PDF - Free online PDF compression tool">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PDF Compressor - Code Utils">
    <meta name="twitter:description"
        content="Reduce PDF file size instantly. Free tool with 100% private client-side processing.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/compress-pdf.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

    <!-- Google Analytics (only load in production) -->
    <script>
        // Only load Google Analytics if NOT on localhost
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            // Load gtag.js
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291';
            document.head.appendChild(script);

            // Initialize GA
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-RPHPBJ4291');
        } else {
            // Mock gtag function for localhost (prevents errors)
            window.gtag = function() {
                console.log('GA (localhost - not tracked):', arguments);
            };
        }
    </script>

    <!-- Structured Data: WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Compress PDF - Code Utils",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Free PDF compressor. Reduce PDF file size. 100% client-side processing.",
      "url": "https://codeutils.org/compress-pdf",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0"
    }
    </script>
    <!-- Structured Data: FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How much will my PDF be compressed?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Compression results vary based on PDF content. Image-heavy and scanned PDFs typically see 20-60% size reduction. PDFs that are mostly text with minimal images may see 5-15% reduction. The tool shows you the exact before and after sizes and percentage saved after compression."
          }
        },
        {
          "@type": "Question",
          "name": "Will compression reduce the quality of my PDF?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "This tool focuses on structural compression‚Äîremoving redundant objects, unused fonts, and compressing data streams‚Äîrather than re-encoding or downsampling images. Text sharpness is preserved. If your PDF contains high-resolution images, those are compressed with minimal quality impact in most cases."
          }
        },
        {
          "@type": "Question",
          "name": "Is my PDF safe to upload here?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Your PDF is not uploaded anywhere. All processing happens entirely in your browser using JavaScript. The file never leaves your device and is never sent to any server. This makes the tool completely safe for confidential contracts, financial documents, medical records, and any sensitive content."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need an account or subscription?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. The tool is completely free with no registration, sign-up, or account required. There are no file size limits or usage caps for free users."
          }
        }
      ]
    }
    </script>
    <!-- Structured Data: HowTo Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Use Free PDF Compressor | Reduce PDF File Size Online Online",
      "description": "Step-by-step guide to using the free online Free PDF Compressor | Reduce PDF File Size Online tool at codeutils.org",
      "step": [
        {
          "@type": "HowToStep",
          "position": 1,
          "name": "Click \"Choose PDF File\" and select the PDF you want to co...",
          "text": "Click \"Choose PDF File\" and select the PDF you want to compress"
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": "The tool displays the original file size and page count",
          "text": "The tool displays the original file size and page count"
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": "Click \"Compress PDF\" to start the optimization process",
          "text": "Click \"Compress PDF\" to start the optimization process"
        },
        {
          "@type": "HowToStep",
          "position": 4,
          "name": "When complete, the tool shows the new file size and the s...",
          "text": "When complete, the tool shows the new file size and the size reduction percentage"
        },
        {
          "@type": "HowToStep",
          "position": 5,
          "name": "The compressed PDF downloads automatically to your device",
          "text": "The compressed PDF downloads automatically to your device"
        }
      ]
    }
    </script>

    <!-- pdf-lib Library -->
    <script defer src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <link rel="stylesheet" href="css/common.css">
</head>

<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <h2>Compress PDF Files</h2>
        <p class="tool-description">Reduce PDF file size while maintaining quality. Optimize your PDFs for web, email, or storage.</p>

        <div id="message-container"></div>

        <div class="card">
            <div class="form-group">
                <label class="file-label">
                    <input type="file" id="fileInput" accept=".pdf,application/pdf">
                    <span class="file-label-text">
                        <span class="file-icon">üìÅ</span>
                        <span>Choose PDF File</span>
                    </span>
                </label>
                <div class="file-info" id="fileInfo">No file selected</div>
            </div>

            <div id="pdfInfo" class="pdf-info" style="display: none;"></div>

            <div class="button-group" id="actionButtons" style="display: none;">
                <button id="compressBtn" class="btn btn-primary">Compress PDF</button>
                <button id="clearBtn" class="btn btn-secondary">Clear</button>
            </div>
        </div>

        <!-- Related Tools -->
        <div class="related-tools">
            <h3>Related Tools</h3>
            <div class="related-tools-grid">
                <a href="merge-pdf.html" class="related-tool-card">
                    <span class="related-tool-icon">üìÑ</span>
                    <span class="related-tool-name">Merge PDF</span>
                </a>
                <a href="split-pdf.html" class="related-tool-card">
                    <span class="related-tool-icon">‚úÇÔ∏è</span>
                    <span class="related-tool-name">Split PDF</span>
                </a>
                <a href="jpg-to-pdf.html" class="related-tool-card">
                    <span class="related-tool-icon">üñºÔ∏è</span>
                    <span class="related-tool-name">JPG to PDF</span>
                </a>
                <a href="pdf-to-png.html" class="related-tool-card">
                    <span class="related-tool-icon">üîß</span>
                    <span class="related-tool-name">PDF to PNG</span>
                </a>
            </div>
        </div>

        <div class="info-section">
            <h2>About PDF Compressor</h2>
            <p>PDF files can grow surprisingly large‚Äîespecially when they contain scanned images, embedded fonts, or redundant data. Large PDFs hit email attachment limits, slow down web uploads, and consume unnecessary storage. Our PDF Compressor analyzes the internal structure of your PDF and applies multiple optimization techniques to reduce the file size while preserving the document's readability and formatting. Processing happens entirely in your browser‚Äîyour file never leaves your device.</p>

            <h3>Key Features</h3>
            <ul>
                <li><strong>Smart Compression:</strong> Applies multiple optimization techniques‚Äîremoving redundant objects, compressing data streams, and deduplicating font definitions</li>
                <li><strong>Before/After Size Display:</strong> See the original and compressed file sizes and the percentage reduction achieved</li>
                <li><strong>Quality Preservation:</strong> Text content, structure, and document formatting are maintained‚Äîonly redundant or compressible data is removed</li>
                <li><strong>Fast Processing:</strong> Compression completes in seconds directly in your browser</li>
                <li><strong>100% Private:</strong> Your PDF never leaves your device‚Äînothing is uploaded to any server</li>
                <li><strong>Free and Unlimited:</strong> No sign-up, no file size limits, completely free to use</li>
            </ul>

            <h3>How to Use This Tool</h3>

            <p><strong>Compressing a PDF</strong></p>
            <ol>
                <li>Click "Choose PDF File" and select the PDF you want to compress</li>
                <li>The tool displays the original file size and page count</li>
                <li>Click "Compress PDF" to start the optimization process</li>
                <li>When complete, the tool shows the new file size and the size reduction percentage</li>
                <li>The compressed PDF downloads automatically to your device</li>
            </ol>

            <h3>Common Use Cases</h3>

            <p><strong>Sending PDFs via Email</strong></p>
            <p>Most email providers have attachment size limits between 10MB and 25MB. Scanned documents, catalogs, and presentation PDFs often exceed these limits. Compress your PDF to bring it within the attachment limit before sending‚Äîwithout switching to a file sharing service or asking the recipient to download from a link.</p>

            <p><strong>Uploading to Web Portals and Forms</strong></p>
            <p>Many government portals, job application systems, university submission forms, and legal platforms impose strict file size limits for document uploads‚Äîoften 2MB, 5MB, or 10MB. If your PDF exceeds the portal's limit, compress it here to get under the threshold and complete your submission.</p>

            <p><strong>Reducing Storage and Backup Size</strong></p>
            <p>Large archives of scanned documents, invoices, contracts, and reports consume significant disk space and cloud storage. Batch-compressing these files over time can meaningfully reduce storage costs and backup times. Compress each PDF individually before archiving to keep your document library lean.</p>

            <h3>Tips &amp; Best Practices</h3>
            <ul>
                <li><strong>Image-heavy PDFs compress best:</strong> PDFs that consist mostly of scanned images or embedded photos benefit most from compression‚Äîreductions of 20-60% are common for this type of content</li>
                <li><strong>Text-only PDFs may compress less:</strong> PDFs containing primarily vector text and minimal images are already compact‚Äîcompression gains may be smaller (5-15%), but the optimization still removes redundant internal data</li>
                <li><strong>For very large PDFs, split first:</strong> If a PDF is very large (50MB+) due to high-resolution images, consider splitting out the pages with the largest images using the PDF Splitter and compressing sections separately</li>
                <li><strong>Check the output before sharing:</strong> Always open the compressed PDF and verify it looks correct before distributing‚Äîcheck that text is sharp, images are acceptable quality, and all pages are present</li>
            </ul>

            <h3>Frequently Asked Questions</h3>

            <p><strong>Q: How much will my PDF be compressed?</strong></p>
            <p>A: Compression results vary based on PDF content. Image-heavy and scanned PDFs typically see 20-60% size reduction. PDFs that are mostly text with minimal images may see 5-15% reduction. The tool shows you the exact before and after sizes and percentage saved after compression.</p>

            <p><strong>Q: Will compression reduce the quality of my PDF?</strong></p>
            <p>A: This tool focuses on structural compression‚Äîremoving redundant objects, unused fonts, and compressing data streams‚Äîrather than re-encoding or downsampling images. Text sharpness is preserved. If your PDF contains high-resolution images, those are compressed with minimal quality impact in most cases.</p>

            <p><strong>Q: Is my PDF safe to upload here?</strong></p>
            <p>A: Your PDF is not uploaded anywhere. All processing happens entirely in your browser using JavaScript. The file never leaves your device and is never sent to any server. This makes the tool completely safe for confidential contracts, financial documents, medical records, and any sensitive content.</p>

            <p><strong>Q: Do I need an account or subscription?</strong></p>
            <p>A: No. The tool is completely free with no registration, sign-up, or account required. There are no file size limits or usage caps for free users.</p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
    </footer>

    <script src="js/common.js"></script>
    <script>
        // Track tool visit
        CodeUtils.RecentTools.add({
            id: 'compress-pdf',
            name: 'Compress PDF',
            url: 'compress-pdf.html'
        });

        // Initialize message container
        CodeUtils.Message.init('message-container');

        // Get elements
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const pdfInfo = document.getElementById('pdfInfo');
        const actionButtons = document.getElementById('actionButtons');
        const compressBtn = document.getElementById('compressBtn');
        const clearBtn = document.getElementById('clearBtn');

        let loadedPdf = null;
        let pdfFile = null;
        let originalSize = 0;

        // File input change handler
        fileInput.addEventListener('change', handleFileSelect);

        async function handleFileSelect(e) {
            const file = e.target.files[0];

            if (!file) return;

            if (file.type !== 'application/pdf') {
                CodeUtils.Message.error('Please select a PDF file');
                return;
            }

            if (file.size > 50 * 1024 * 1024) {
                CodeUtils.Message.error('File size must be less than 50MB');
                return;
            }

            try {
                pdfFile = file;
                originalSize = file.size;
                fileInfo.textContent = `${file.name} (${formatFileSize(file.size)})`;

                // Load PDF
                CodeUtils.Message.success('Loading PDF...');
                const arrayBuffer = await file.arrayBuffer();
                const { PDFDocument } = PDFLib;
                loadedPdf = await PDFDocument.load(arrayBuffer);

                const pageCount = loadedPdf.getPageCount();

                pdfInfo.style.display = 'block';
                pdfInfo.innerHTML = `
                    <div class="pdf-stats">
                        <div class="pdf-stat">
                            <div class="pdf-stat-label">Original Size</div>
                            <div class="pdf-stat-value">${formatFileSize(originalSize)}</div>
                        </div>
                        <div class="pdf-stat">
                            <div class="pdf-stat-label">Pages</div>
                            <div class="pdf-stat-value">${pageCount}</div>
                        </div>
                    </div>
                `;

                actionButtons.style.display = 'flex';

                CodeUtils.Message.success(`PDF loaded: ${pageCount} pages`);

            } catch (error) {
                console.error('Load error:', error);
                CodeUtils.Message.error('Failed to load PDF: ' + error.message);
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Compress button handler
        compressBtn.addEventListener('click', async () => {
            if (!loadedPdf) {
                CodeUtils.Message.error('Please select a PDF file first');
                return;
            }

            try {
                compressBtn.disabled = true;
                compressBtn.textContent = 'Compressing...';
                CodeUtils.Message.success('Compressing PDF...');

                // Save with compression
                const pdfBytes = await loadedPdf.save({
                    useObjectStreams: true,  // Enable object streams
                    addDefaultPage: false,
                    objectsPerTick: 50
                });

                const compressedSize = pdfBytes.length;
                const reduction = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);

                // Update stats
                pdfInfo.innerHTML = `
                    <div class="pdf-stats">
                        <div class="pdf-stat">
                            <div class="pdf-stat-label">Original Size</div>
                            <div class="pdf-stat-value">${formatFileSize(originalSize)}</div>
                        </div>
                        <div class="pdf-stat">
                            <div class="pdf-stat-label">Compressed Size</div>
                            <div class="pdf-stat-value success">${formatFileSize(compressedSize)}</div>
                        </div>
                        <div class="pdf-stat">
                            <div class="pdf-stat-label">Reduction</div>
                            <div class="pdf-stat-value success">${reduction}%</div>
                        </div>
                    </div>
                `;

                // Download
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'compressed.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                CodeUtils.Message.success(`Compressed by ${reduction}%! Size: ${formatFileSize(compressedSize)}`);

                // Track compression
                gtag('event', 'compress', {
                    'event_category': 'compress_pdf',
                    'event_label': 'success',
                    'value': Math.round(reduction)
                });

            } catch (error) {
                console.error('Compression error:', error);
                CodeUtils.Message.error('Failed to compress PDF: ' + error.message);

                gtag('event', 'error', {
                    'event_category': 'compress_pdf',
                    'event_label': error.message
                });
            } finally {
                compressBtn.disabled = false;
                compressBtn.textContent = 'Compress PDF';
            }
        });

        // Clear button handler
        clearBtn.addEventListener('click', () => {
            fileInput.value = '';
            loadedPdf = null;
            pdfFile = null;
            originalSize = 0;
            fileInfo.textContent = 'No file selected';
            pdfInfo.style.display = 'none';
            actionButtons.style.display = 'none';
            CodeUtils.Message.success('Cleared');
        });

        // Drag and drop support
        const container = document.querySelector('.card');

        container.addEventListener('dragover', (e) => {
            e.preventDefault();
            container.style.borderColor = '#3498db';
        });

        container.addEventListener('dragleave', (e) => {
            e.preventDefault();
            container.style.borderColor = '';
        });

        container.addEventListener('drop', (e) => {
            e.preventDefault();
            container.style.borderColor = '';

            const files = Array.from(e.dataTransfer.files);
            const pdfFile = files.find(f => f.type === 'application/pdf');

            if (pdfFile) {
                const dt = new DataTransfer();
                dt.items.add(pdfFile);
                fileInput.files = dt.files;
                fileInput.dispatchEvent(new Event('change'));
            } else {
                CodeUtils.Message.warning('Please drop a PDF file');
            }
        });
    </script>

    <style>
        .pdf-info {
            padding: 1.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .pdf-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
        }

        .pdf-stat {
            text-align: center;
        }

        .pdf-stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .pdf-stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .pdf-stat-value.success {
            color: var(--success-color);
        }
    </style>
</body>

</html>
