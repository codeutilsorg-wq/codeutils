<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Favicon Generator | Gradient Backgrounds, Custom Fonts & All Sizes - Code Utils</title>
    <meta name="description"
        content="Free favicon generator with gradient backgrounds, 10 fonts, and 9 sizes (16-512px). Text, emoji & image support. Hexagon shapes, platform previews. Download ZIP/ICO. 100% private.">
    <link rel="canonical" href="https://codeutils.org/favicon-generator">

    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#3498db">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/favicon-generator">
    <meta property="og:title" content="Free Favicon Generator - Code Utils">
    <meta property="og:description"
        content="Create favicons from text, emoji, or images. Generate multiple sizes instantly. 100% private client-side processing.">
    <meta property="og:image" content="https://codeutils.org/images/og/favicon-generator.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Favicon Generator - Free online favicon creation tool">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Favicon Generator - Code Utils">
    <meta name="twitter:description"
        content="Create favicons from text, emoji, or images. Generate multiple sizes instantly. Free tool with 100% private client-side processing.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/favicon-generator.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-RPHPBJ4291');
    </script>

    <!-- Structured Data: WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Favicon Generator - Code Utils",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Advanced favicon generator with unique gradient backgrounds (linear/radial), 10 custom fonts, and comprehensive size support (16x16 to 512x512). Create from text, 200+ emojis, or upload images. Features hexagon shapes, custom border radius, and platform preview mockups. Download as ZIP, ICO, or individual PNGs. 100% client-side processing - your images never leave your browser.",
      "url": "https://codeutils.org/favicon-generator",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0",
      "featureList": [
        "Gradient backgrounds (linear & radial) - UNIQUE!",
        "10 custom fonts (Arial, Georgia, Impact, etc.)",
        "Text, emoji (200+), and image upload",
        "9 comprehensive sizes: 16, 32, 64, 96, 128, 180, 192, 256, 512px",
        "5 shapes: square, rounded, circle, hexagon, custom radius",
        "Platform preview mockups (browser, iOS, Android)",
        "iOS, Android, PWA, Chrome, Windows support",
        "ZIP download with all sizes + README",
        "favicon.ico generation (multi-size)",
        "Drag & drop image upload",
        "Client-side processing - 100% private",
        "No data uploads, no limits",
        "Free forever"
      ]
    }
    </script>

    <!-- Structured Data: FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Is my logo/image safe when using this tool?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, absolutely! All favicon generation happens entirely in your browser using JavaScript. Your images and data never leave your computer and are never uploaded to any server. We don't store, log, or transmit your images in any way. This makes our tool completely safe for proprietary logos, brand assets, or sensitive graphics. You can even use this tool offline after the initial page load."
          }
        },
        {
          "@type": "Question",
          "name": "What favicon sizes should I use for my website?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For modern websites, you should include: 16x16 for browser tabs, 32x32 for taskbar shortcuts, 180x180 for iOS, 192x192 for Android, and 512x512 for PWAs. Our tool generates ALL 9 professional sizes: 16x16, 32x32, 64x64, 96x96 (Google TV), 128x128 (Chrome extensions), 180x180 (iOS), 192x192 (Android), 256x256 (Windows tiles), and 512x512 (PWA). Download everything in one ZIP file."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need to create an account or sign up?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No! All our tools are completely free and don't require any registration, sign-up, or account creation. Just visit the page and start creating favicons immediately. There are no limits on usage, no premium tiers, and no hidden fees."
          }
        },
        {
          "@type": "Question",
          "name": "Can I create favicons from my company logo?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes! You can use text, emoji, or upload your existing company logo to convert it into a favicon. Our tool supports multiple input methods to accommodate different use cases. Simply choose your preferred method and customize the colors and shapes to match your brand."
          }
        },
        {
          "@type": "Question",
          "name": "What file format are the generated favicons?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Our tool generates favicons in both PNG and ICO formats. PNG is supported by all modern browsers and provides better quality, while ICO format ensures compatibility with older browsers. You can download a complete ZIP package with all 9 sizes (16x16 through 512x512) plus favicon.ico and installation instructions, or download formats individually. The ZIP includes properly named files for each platform (apple-touch-icon.png, android-chrome-192x192.png, etc.)."
          }
        }
      ]
    }
    </script>

    <!-- JSZip for ZIP downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <link rel="stylesheet" href="css/common.css">
    <style>
        .input-tabs {
            display: flex;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--border);
        }

        .input-tab {
            padding: var(--spacing-sm) var(--spacing-md);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: -2px;
        }

        .input-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .input-section {
            display: none;
        }

        .input-section.active {
            display: block;
        }

        .upload-zone {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            text-align: center;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: var(--spacing-md);
        }

        .upload-zone:hover,
        .upload-zone.drag-over {
            border-color: var(--primary);
            background: var(--bg-primary);
        }

        .upload-zone input[type="file"] {
            display: none;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-sm);
        }

        .preview-container {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: var(--spacing-md);
        }

        .preview-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            text-align: center;
        }

        .preview-box canvas {
            border: 1px solid var(--border);
            background: white;
            display: block;
            margin: 0 auto;
        }

        .preview-box .label {
            margin-top: var(--spacing-xs);
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .option-group {
            background: var(--bg-secondary);
            padding: var(--spacing-md);
            border-radius: var(--radius);
        }

        .option-group label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: bold;
        }

        .option-group input,
        .option-group select {
            width: 100%;
            padding: var(--spacing-xs);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 4px;
            margin-top: var(--spacing-xs);
            max-height: 200px;
            overflow-y: auto;
            padding: var(--spacing-xs);
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
        }

        .emoji-btn {
            font-size: 1.5rem;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-btn:hover {
            background: var(--primary);
            transform: scale(1.1);
        }

        .emoji-search {
            width: 100%;
            padding: var(--spacing-xs);
            margin-bottom: var(--spacing-xs);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        /* Platform Preview Styles */
        .platform-preview {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            text-align: center;
        }

        .platform-label {
            font-weight: bold;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
        }

        /* Browser Tab Mock */
        .browser-tab {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px 8px 0 0;
            padding: 8px 12px;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .tab-title {
            color: var(--text-primary);
        }

        .tab-close {
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.25rem;
            line-height: 1;
        }

        /* iOS Home Screen Mock */
        .ios-screen {
            display: inline-block;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
        }

        .ios-icon {
            margin-bottom: 8px;
        }

        .ios-icon canvas {
            display: block;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .ios-app-name {
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        /* Android Home Screen Mock */
        .android-screen {
            display: inline-block;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
            border-radius: 8px;
        }

        .android-icon {
            margin-bottom: 8px;
        }

        .android-icon canvas {
            display: block;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border-radius: 25%;
        }

        .android-app-name {
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
            <h2 style="margin-bottom: var(--spacing-xs); color: var(--primary);">Favicon Generator</h2>
            <p style="margin: 0; color: var(--text-secondary);">Create favicons from text, emoji, or upload images. Generate all sizes instantly.</p>
        </div>

        <!-- Input Method Tabs -->
        <div class="input-tabs">
            <button class="input-tab active" onclick="switchInputTab('text')">Text & Emoji</button>
            <button class="input-tab" onclick="switchInputTab('upload')">Upload Image</button>
        </div>

        <!-- Text/Emoji Input Section -->
        <div id="textSection" class="input-section active">
            <div class="options-grid">
                <div class="option-group">
                    <label>Text/Emoji</label>
                    <input type="text" id="textInput" value="CU" maxlength="4" oninput="generateFavicon()">
                    <input type="text" class="emoji-search" id="emojiSearch" placeholder="Search emoji..." oninput="filterEmojis()">
                    <div class="emoji-grid" id="emojiGrid"></div>
                </div>
                <div class="option-group">
                    <label>Font Family</label>
                    <select id="fontFamily" onchange="generateFavicon()">
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="Helvetica, sans-serif">Helvetica</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                        <option value="Georgia, serif">Georgia</option>
                        <option value="'Courier New', monospace">Courier New</option>
                        <option value="Verdana, sans-serif">Verdana</option>
                        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                        <option value="Impact, sans-serif">Impact</option>
                        <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                        <option value="'Brush Script MT', cursive">Brush Script</option>
                    </select>
                </div>
                <div class="option-group">
                    <label>Background Type</label>
                    <select id="bgType" onchange="toggleBackgroundType()">
                        <option value="solid">Solid Color</option>
                        <option value="linear">Linear Gradient</option>
                        <option value="radial">Radial Gradient</option>
                    </select>
                </div>
                <div class="option-group" id="solidColorGroup">
                    <label>Background Color</label>
                    <input type="color" id="bgColor" value="#3b82f6" onchange="generateFavicon()">
                </div>
                <div class="option-group" id="gradientGroup" style="display: none;">
                    <label>Gradient Colors</label>
                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                        <input type="color" id="gradientColor1" value="#3b82f6" onchange="generateFavicon()" style="width: 50%;">
                        <input type="color" id="gradientColor2" value="#8b5cf6" onchange="generateFavicon()" style="width: 50%;">
                    </div>
                    <label style="font-size: 0.875rem;">Angle (Linear) / Position (Radial)</label>
                    <input type="range" id="gradientAngle" min="0" max="360" value="45" oninput="generateFavicon()" style="width: 100%;">
                    <span id="angleValue" style="font-size: 0.75rem; color: var(--text-secondary);">45¬∞</span>
                </div>
                <div class="option-group">
                    <label>Text Color</label>
                    <input type="color" id="textColor" value="#ffffff" onchange="generateFavicon()">
                </div>
                <div class="option-group">
                    <label>Shape</label>
                    <select id="shape" onchange="generateFavicon()">
                        <option value="square">Square</option>
                        <option value="rounded">Rounded</option>
                        <option value="circle">Circle</option>
                        <option value="hexagon">Hexagon</option>
                        <option value="custom">Custom Radius</option>
                    </select>
                </div>
                <div class="option-group" id="customRadiusGroup" style="display: none;">
                    <label>Border Radius: <span id="radiusValue">20%</span></label>
                    <input type="range" id="borderRadius" min="0" max="50" value="20" oninput="updateRadius()" style="width: 100%;">
                </div>
            </div>
        </div>

        <!-- Upload Image Section -->
        <div id="uploadSection" class="input-section">
            <div class="upload-zone" id="uploadZone">
                <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(event)">
                <div class="upload-icon">üìÅ</div>
                <p>Click to upload or drag & drop an image</p>
                <p style="font-size: 0.875rem; color: var(--text-secondary);">PNG, JPG, GIF, SVG supported</p>
            </div>
            <div class="options-grid">
                <div class="option-group">
                    <label>Background Color (if transparent)</label>
                    <input type="color" id="uploadBgColor" value="#3b82f6" onchange="generateFromImage()">
                </div>
                <div class="option-group">
                    <label>Shape</label>
                    <select id="uploadShape" onchange="generateFromImage()">
                        <option value="square">Square</option>
                        <option value="rounded">Rounded</option>
                        <option value="circle">Circle</option>
                    </select>
                </div>
            </div>
        </div>

        <h3 style="margin-top: var(--spacing-lg); margin-bottom: var(--spacing-md);">Preview - All Sizes</h3>
        <div class="preview-container">
            <div class="preview-box">
                <canvas id="preview512" width="512" height="512" style="max-width: 128px; max-height: 128px;"></canvas>
                <div class="label">512x512 (PWA)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview256" width="256" height="256" style="max-width: 128px; max-height: 128px;"></canvas>
                <div class="label">256x256 (Windows)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview192" width="192" height="192" style="max-width: 96px; max-height: 96px;"></canvas>
                <div class="label">192x192 (Android)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview180" width="180" height="180" style="max-width: 90px; max-height: 90px;"></canvas>
                <div class="label">180x180 (iOS)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview128" width="128" height="128" style="max-width: 64px; max-height: 64px;"></canvas>
                <div class="label">128x128 (Chrome)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview96" width="96" height="96" style="max-width: 64px; max-height: 64px;"></canvas>
                <div class="label">96x96 (Google TV)</div>
            </div>
            <div class="preview-box">
                <canvas id="preview64" width="64" height="64"></canvas>
                <div class="label">64x64</div>
            </div>
            <div class="preview-box">
                <canvas id="preview32" width="32" height="32"></canvas>
                <div class="label">32x32</div>
            </div>
            <div class="preview-box">
                <canvas id="preview16" width="16" height="16"></canvas>
                <div class="label">16x16</div>
            </div>
        </div>

        <!-- Platform Preview Mockups -->
        <h3 style="margin-top: var(--spacing-lg); margin-bottom: var(--spacing-md);">Platform Previews</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
            <!-- Browser Tab Preview -->
            <div class="platform-preview">
                <div class="platform-label">Browser Tab</div>
                <div class="browser-tab">
                    <canvas id="previewBrowserTab" width="16" height="16" style="width: 16px; height: 16px;"></canvas>
                    <span class="tab-title">Your Website</span>
                    <span class="tab-close">√ó</span>
                </div>
            </div>

            <!-- iOS Home Screen Preview -->
            <div class="platform-preview">
                <div class="platform-label">iOS Home Screen</div>
                <div class="ios-screen">
                    <div class="ios-icon">
                        <canvas id="previewIOS" width="180" height="180" style="width: 60px; height: 60px; border-radius: 13px;"></canvas>
                    </div>
                    <div class="ios-app-name">Your App</div>
                </div>
            </div>

            <!-- Android Home Screen Preview -->
            <div class="platform-preview">
                <div class="platform-label">Android Home Screen</div>
                <div class="android-screen">
                    <div class="android-icon">
                        <canvas id="previewAndroid" width="192" height="192" style="width: 60px; height: 60px;"></canvas>
                    </div>
                    <div class="android-app-name">Your App</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="downloadZip()">üì¶ Download All (ZIP)</button>
            <button class="btn" onclick="downloadIco()">Download favicon.ico</button>
            <button class="btn btn-secondary" onclick="downloadIndividual()">Download Individual PNGs</button>
        </div>

        <div id="message" class="message"></div>

        <div class="editor-section" style="margin-top: var(--spacing-md);">
            <div class="editor-header">HTML Code (Add to &lt;head&gt;)</div>
            <textarea id="htmlCode" class="editor" readonly style="height: 220px;"><link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="64x64" href="/favicon-64x64.png">
<link rel="icon" type="image/png" sizes="96x96" href="/google-tv-96x96.png">
<link rel="icon" type="image/png" sizes="128x128" href="/chrome-extension-128x128.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="256x256" href="/windows-tile-256x256.png">
<link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png"></textarea>
        </div>

        <div class="related-tools">
            <h3>Related Tools</h3>
            <ul class="related-tools-list">
                <li><a href="meta-generator.html">Meta Tag Generator</a></li>
                <li><a href="color-picker.html">Color Picker</a></li>
                <li><a href="qr-generator.html">QR Code Generator</a></li>
            </ul>
        </div>

        <div class="info-section">
            <h2>About Favicons</h2>
            <p>Favicons are small icons displayed in browser tabs, bookmarks, and address bars.</p>

            <h3>Recommended Sizes</h3>
            <ul>
                <li><strong>16x16:</strong> Browser tabs (traditional)</li>
                <li><strong>32x32:</strong> Taskbar shortcuts, high-DPI tabs</li>
                <li><strong>64x64:</strong> High-resolution displays</li>
                <li><strong>180x180:</strong> Apple Touch Icon</li>
                <li><strong>512x512:</strong> PWA icons</li>
            </ul>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
        <p>Free developer utilities - 100% client-side processing</p>
    </footer>

    <script src="js/common.js"></script>
    <script>
        CodeUtils.RecentTools.add({
            id: 'favicon-generator',
            name: 'Favicon Generator',
            url: 'favicon-generator.html'
        });

        CodeUtils.Message.init('message');

        // All favicon sizes to generate
        const SIZES = [16, 32, 64, 96, 128, 180, 192, 256, 512];

        // Comprehensive emoji library
        const EMOJI_LIBRARY = {
            'Popular': ['üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÖ', 'üòÇ', 'ü§£', 'üòä', 'üòá', 'üôÇ', 'üôÉ', 'üòâ', 'üòå', 'üòç', 'ü•∞', 'üòò', 'üòó', 'üòô', 'üòö', 'üòã', 'üòõ', 'üòù', 'üòú', 'ü§™', 'ü§®', 'üßê', 'ü§ì', 'üòé', 'ü§©', 'ü•≥'],
            'Symbols': ['‚ù§Ô∏è', 'üíô', 'üíö', 'üíõ', 'üß°', 'üíú', 'üñ§', 'ü§ç', 'ü§é', 'üíî', '‚ù£Ô∏è', 'üíï', 'üíû', 'üíì', 'üíó', 'üíñ', 'üíò', 'üíù', '‚≠ê', 'üåü', '‚ú®', '‚ö°', 'üî•', 'üí•', 'üí´', 'üí¶', 'üí®', 'üåà', '‚òÄÔ∏è', 'üåô'],
            'Tech': ['üíª', '‚å®Ô∏è', 'üñ•Ô∏è', 'üñ®Ô∏è', 'üñ±Ô∏è', 'üíæ', 'üíø', 'üìÄ', 'üì±', 'üì≤', '‚òéÔ∏è', 'üìû', 'üìü', 'üì†', 'üì°', 'üîã', 'üîå', 'üí°', 'üî¶', 'üïØÔ∏è', 'ü™î', 'üßØ', 'üõ¢Ô∏è', 'üí∏', 'üíµ', 'üí¥', 'üí∂', 'üí∑', 'üí∞', 'üí≥'],
            'Objects': ['üéØ', 'üé™', 'üé®', 'üé¨', 'üé§', 'üéß', 'üéº', 'üéπ', 'ü•Å', 'üé∑', 'üé∫', 'üé∏', 'ü™ï', 'üéª', 'üé≤', '‚ôüÔ∏è', 'üéØ', 'üé≥', 'üéÆ', 'üé∞', 'üß©', 'üß∏', 'ü™Ä', 'ü™Å', 'üé™', 'üé≠', 'üñºÔ∏è', 'üé®', 'üßµ', 'ü™°'],
            'Nature': ['üå±', 'üåø', '‚òòÔ∏è', 'üçÄ', 'üéã', 'üéç', 'üåæ', 'üåµ', 'üå¥', 'üå≥', 'üå≤', 'üèîÔ∏è', '‚õ∞Ô∏è', 'üåã', 'üóª', 'üèïÔ∏è', 'üèñÔ∏è', 'üèúÔ∏è', 'üèùÔ∏è', 'üèûÔ∏è', 'üåÖ', 'üåÑ', 'üå†', 'üéá', 'üéÜ', 'üåá', 'üåÜ', 'üèôÔ∏è', 'üåÉ', 'üåå'],
            'Food': ['üçé', 'üçè', 'üçä', 'üçã', 'üçå', 'üçâ', 'üçá', 'üçì', 'ü´ê', 'üçà', 'üçí', 'üçë', 'ü•≠', 'üçç', 'ü••', 'ü•ù', 'üçÖ', 'üçÜ', 'ü•ë', 'ü•¶', 'ü•¨', 'ü•í', 'üå∂Ô∏è', 'ü´ë', 'üåΩ', 'ü•ï', 'ü´í', 'üßÑ', 'üßÖ', 'ü•î'],
            'Activities': ['‚öΩ', 'üèÄ', 'üèà', '‚öæ', 'ü•é', 'üéæ', 'üèê', 'üèâ', 'ü•è', 'üé±', 'ü™Ä', 'üèì', 'üè∏', 'üèí', 'üèë', 'ü•ç', 'üèè', 'ü™É', 'ü•Ö', '‚õ≥', 'ü™Å', 'üèπ', 'üé£', 'ü§ø', 'ü•ä', 'ü•ã', 'üéΩ', 'üõπ', 'üõº', 'üõ∑'],
            'Vehicles': ['üöó', 'üöï', 'üöô', 'üöå', 'üöé', 'üèéÔ∏è', 'üöì', 'üöë', 'üöí', 'üöê', 'üõª', 'üöö', 'üöõ', 'üöú', 'üõ¥', 'üö≤', 'üõµ', 'üèçÔ∏è', 'üõ∫', 'üö®', 'üöî', 'üöç', 'üöò', 'üöñ', 'üö°', 'üö†', 'üöü', 'üöÉ', 'üöã', 'üöû'],
            'Flags': ['üèÅ', 'üö©', 'üéå', 'üè¥', 'üè≥Ô∏è', 'üè≥Ô∏è‚Äçüåà', 'üè≥Ô∏è‚Äç‚ößÔ∏è', 'üè¥‚Äç‚ò†Ô∏è', 'üá∫üá∏', 'üá¨üáß', 'üá®üá¶', 'üá¶üá∫', 'üá©üá™', 'üá´üá∑', 'üá™üá∏', 'üáÆüáπ', 'üáØüáµ', 'üá∞üá∑', 'üá®üá≥', 'üáÆüá≥', 'üáßüá∑', 'üá≤üáΩ', 'üá∑üá∫', 'üáøüá¶', 'üá∏üá™', 'üá≥üá¥', 'üá©üá∞', 'üá´üáÆ', 'üá≥üá±', 'üáßüá™']
        };

        let currentInputMode = 'text';
        let uploadedImage = null;
        let allEmojis = [];

        // Initialize
        function init() {
            // Flatten emoji library
            Object.values(EMOJI_LIBRARY).forEach(emojis => {
                allEmojis = allEmojis.concat(emojis);
            });

            // Populate emoji grid
            populateEmojiGrid(allEmojis);

            // Setup drag & drop
            const uploadZone = document.getElementById('uploadZone');
            uploadZone.addEventListener('click', () => document.getElementById('imageUpload').click());
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('drag-over');
            });
            uploadZone.addEventListener('dragleave', () => {
                uploadZone.classList.remove('drag-over');
            });
            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('drag-over');
                const file = e.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    loadImageFile(file);
                }
            });

            // Initial generation
            generateFavicon();
        }

        // Populate emoji grid
        function populateEmojiGrid(emojis) {
            const grid = document.getElementById('emojiGrid');
            grid.innerHTML = '';
            emojis.slice(0, 100).forEach(emoji => {
                const btn = document.createElement('span');
                btn.className = 'emoji-btn';
                btn.textContent = emoji;
                btn.onclick = () => setEmoji(emoji);
                grid.appendChild(btn);
            });
        }

        // Filter emojis based on search
        function filterEmojis() {
            const search = document.getElementById('emojiSearch').value.toLowerCase();
            if (!search) {
                populateEmojiGrid(allEmojis);
                return;
            }
            // Simple filter - in real app, you'd map emoji to keywords
            populateEmojiGrid(allEmojis);
        }

        // Switch input tabs
        function switchInputTab(mode) {
            currentInputMode = mode;

            // Update tab buttons
            document.querySelectorAll('.input-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update sections
            document.getElementById('textSection').classList.toggle('active', mode === 'text');
            document.getElementById('uploadSection').classList.toggle('active', mode === 'upload');

            // Generate based on current mode
            if (mode === 'text') {
                generateFavicon();
            } else if (uploadedImage) {
                generateFromImage();
            }
        }

        // Set emoji
        function setEmoji(emoji) {
            document.getElementById('textInput').value = emoji;
            generateFavicon();
        }

        // Handle image upload
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                loadImageFile(file);
            }
        }

        // Load image file
        function loadImageFile(file) {
            // Check file size
            if (file.size > 10 * 1024 * 1024) {
                CodeUtils.Message.error('Image too large! Please use an image under 10MB.');
                return;
            }
            if (file.size > 2 * 1024 * 1024) {
                CodeUtils.Message.warning('Large image detected. Processing may be slow.');
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    uploadedImage = img;
                    generateFromImage();
                    CodeUtils.Message.success('Image loaded successfully!');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Toggle background type controls
        function toggleBackgroundType() {
            const bgType = document.getElementById('bgType').value;
            document.getElementById('solidColorGroup').style.display = bgType === 'solid' ? 'block' : 'none';
            document.getElementById('gradientGroup').style.display = bgType !== 'solid' ? 'block' : 'none';
            generateFavicon();
        }

        // Update custom radius display
        function updateRadius() {
            const value = document.getElementById('borderRadius').value;
            document.getElementById('radiusValue').textContent = value + '%';
            generateFavicon();
        }

        // Update gradient angle display
        function updateAngleDisplay() {
            const value = document.getElementById('gradientAngle').value;
            document.getElementById('angleValue').textContent = value + '¬∞';
        }

        // Show/hide custom radius control
        function toggleShapeControls() {
            const shape = document.getElementById('shape').value;
            document.getElementById('customRadiusGroup').style.display = shape === 'custom' ? 'block' : 'none';
        }

        // Generate favicon from text/emoji
        function generateFavicon() {
            if (currentInputMode !== 'text') return;

            const text = document.getElementById('textInput').value || 'F';
            const textColor = document.getElementById('textColor').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const shape = document.getElementById('shape').value;
            const bgType = document.getElementById('bgType').value;

            // Background settings
            const bgColor = document.getElementById('bgColor').value;
            const gradientColor1 = document.getElementById('gradientColor1').value;
            const gradientColor2 = document.getElementById('gradientColor2').value;
            const gradientAngle = parseInt(document.getElementById('gradientAngle').value);
            updateAngleDisplay();

            toggleShapeControls();

            SIZES.forEach(size => {
                const canvas = document.getElementById(`preview${size}`);
                if (!canvas) return;
                const ctx = canvas.getContext('2d');

                ctx.clearRect(0, 0, size, size);

                // Background
                if (bgType === 'linear') {
                    const angleRad = (gradientAngle - 90) * Math.PI / 180;
                    const x1 = size / 2 + Math.cos(angleRad) * size / 2;
                    const y1 = size / 2 + Math.sin(angleRad) * size / 2;
                    const x2 = size / 2 - Math.cos(angleRad) * size / 2;
                    const y2 = size / 2 - Math.sin(angleRad) * size / 2;
                    const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
                    gradient.addColorStop(0, gradientColor1);
                    gradient.addColorStop(1, gradientColor2);
                    ctx.fillStyle = gradient;
                } else if (bgType === 'radial') {
                    const centerX = size / 2;
                    const centerY = size / 2;
                    const radius = size / 2;
                    const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                    gradient.addColorStop(0, gradientColor1);
                    gradient.addColorStop(1, gradientColor2);
                    ctx.fillStyle = gradient;
                } else {
                    ctx.fillStyle = bgColor;
                }

                drawShape(ctx, size, shape);

                // Text
                ctx.fillStyle = textColor;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Adjust font size based on text length and canvas size
                let fontSize = size * 0.6;
                if (text.length === 2) fontSize = size * 0.45;
                if (text.length >= 3) fontSize = size * 0.35;

                ctx.font = `bold ${fontSize}px ${fontFamily}`;
                ctx.fillText(text, size / 2, size / 2 + (size * 0.05));
            });

            // Update platform previews
            updatePlatformPreviews();
        }

        // Generate favicon from uploaded image
        function generateFromImage() {
            if (!uploadedImage || currentInputMode !== 'upload') return;

            const bgColor = document.getElementById('uploadBgColor').value;
            const shape = document.getElementById('uploadShape').value;

            SIZES.forEach(size => {
                const canvas = document.getElementById(`preview${size}`);
                const ctx = canvas.getContext('2d');

                ctx.clearRect(0, 0, size, size);

                // Background (for transparent images)
                ctx.fillStyle = bgColor;
                drawShape(ctx, size, shape);

                // Calculate scaling to fit image
                const scale = Math.min(size / uploadedImage.width, size / uploadedImage.height);
                const scaledWidth = uploadedImage.width * scale;
                const scaledHeight = uploadedImage.height * scale;
                const x = (size - scaledWidth) / 2;
                const y = (size - scaledHeight) / 2;

                // Clip to shape if needed
                if (shape === 'circle') {
                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);
                    ctx.clip();
                    ctx.drawImage(uploadedImage, x, y, scaledWidth, scaledHeight);
                    ctx.restore();
                } else if (shape === 'rounded') {
                    ctx.save();
                    const r = size * 0.2;
                    ctx.beginPath();
                    ctx.moveTo(r, 0);
                    ctx.lineTo(size - r, 0);
                    ctx.quadraticCurveTo(size, 0, size, r);
                    ctx.lineTo(size, size - r);
                    ctx.quadraticCurveTo(size, size, size - r, size);
                    ctx.lineTo(r, size);
                    ctx.quadraticCurveTo(0, size, 0, size - r);
                    ctx.lineTo(0, r);
                    ctx.quadraticCurveTo(0, 0, r, 0);
                    ctx.clip();
                    ctx.drawImage(uploadedImage, x, y, scaledWidth, scaledHeight);
                    ctx.restore();
                } else {
                    ctx.drawImage(uploadedImage, x, y, scaledWidth, scaledHeight);
                }
            });

            // Update platform previews
            updatePlatformPreviews();
        }

        // Draw shape helper
        function drawShape(ctx, size, shape) {
            if (shape === 'circle') {
                ctx.beginPath();
                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);
                ctx.fill();
            } else if (shape === 'rounded') {
                const r = size * 0.2;
                ctx.beginPath();
                ctx.moveTo(r, 0);
                ctx.lineTo(size - r, 0);
                ctx.quadraticCurveTo(size, 0, size, r);
                ctx.lineTo(size, size - r);
                ctx.quadraticCurveTo(size, size, size - r, size);
                ctx.lineTo(r, size);
                ctx.quadraticCurveTo(0, size, 0, size - r);
                ctx.lineTo(0, r);
                ctx.quadraticCurveTo(0, 0, r, 0);
                ctx.fill();
            } else if (shape === 'hexagon') {
                // Draw hexagon
                const centerX = size / 2;
                const centerY = size / 2;
                const radius = size / 2;
                ctx.beginPath();
                for (let i = 0; i < 6; i++) {
                    const angle = (Math.PI / 3) * i - Math.PI / 2;
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.closePath();
                ctx.fill();
            } else if (shape === 'custom') {
                // Custom border radius
                const radiusPercent = parseInt(document.getElementById('borderRadius').value) / 100;
                const r = size * radiusPercent;
                ctx.beginPath();
                ctx.moveTo(r, 0);
                ctx.lineTo(size - r, 0);
                ctx.quadraticCurveTo(size, 0, size, r);
                ctx.lineTo(size, size - r);
                ctx.quadraticCurveTo(size, size, size - r, size);
                ctx.lineTo(r, size);
                ctx.quadraticCurveTo(0, size, 0, size - r);
                ctx.lineTo(0, r);
                ctx.quadraticCurveTo(0, 0, r, 0);
                ctx.fill();
            } else {
                ctx.fillRect(0, 0, size, size);
            }
        }

        // Update platform preview mockups
        function updatePlatformPreviews() {
            // Browser tab preview (16x16)
            const browserTabCanvas = document.getElementById('previewBrowserTab');
            const preview16 = document.getElementById('preview16');
            if (browserTabCanvas && preview16) {
                const ctx = browserTabCanvas.getContext('2d');
                ctx.clearRect(0, 0, 16, 16);
                ctx.drawImage(preview16, 0, 0);
            }

            // iOS preview (180x180)
            const iosCanvas = document.getElementById('previewIOS');
            const preview180 = document.getElementById('preview180');
            if (iosCanvas && preview180) {
                const ctx = iosCanvas.getContext('2d');
                ctx.clearRect(0, 0, 180, 180);
                ctx.drawImage(preview180, 0, 0);
            }

            // Android preview (192x192)
            const androidCanvas = document.getElementById('previewAndroid');
            const preview192 = document.getElementById('preview192');
            if (androidCanvas && preview192) {
                const ctx = androidCanvas.getContext('2d');
                ctx.clearRect(0, 0, 192, 192);
                ctx.drawImage(preview192, 0, 0);
            }
        }

        // Download ZIP with all sizes
        async function downloadZip() {
            try {
                const zip = new JSZip();

                // Add all PNG sizes
                for (const size of SIZES) {
                    const canvas = document.getElementById(`preview${size}`);
                    if (!canvas) continue;
                    const blob = await new Promise(resolve => canvas.toBlob(resolve));
                    let filename;
                    if (size === 180) filename = 'apple-touch-icon.png';
                    else if (size === 192) filename = 'android-chrome-192x192.png';
                    else if (size === 512) filename = 'android-chrome-512x512.png';
                    else if (size === 256) filename = 'windows-tile-256x256.png';
                    else if (size === 128) filename = 'chrome-extension-128x128.png';
                    else if (size === 96) filename = 'google-tv-96x96.png';
                    else filename = `favicon-${size}x${size}.png`;
                    zip.file(filename, blob);
                }

                // Add favicon.ico
                const icoBlob = await generateIcoBlob();
                zip.file('favicon.ico', icoBlob);

                // Add HTML instructions
                const htmlCode = document.getElementById('htmlCode').value;
                zip.file('README.txt', `Favicon Installation Instructions
=================================

1. Upload all files to your website's root directory
2. Add this HTML code to your <head> section:

${htmlCode}

3. Clear your browser cache and refresh to see the new favicon

Generated by Code Utils (https://codeutils.org/favicon-generator)
`);

                // Generate and download ZIP
                const content = await zip.generateAsync({ type: 'blob' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = 'favicons.zip';
                link.click();

                CodeUtils.Message.success('ZIP file downloaded with all favicon sizes!');
            } catch (error) {
                CodeUtils.Message.error('Error creating ZIP file: ' + error.message);
            }
        }

        // Download individual PNGs
        function downloadIndividual() {
            SIZES.forEach((size, index) => {
                setTimeout(() => {
                    const canvas = document.getElementById(`preview${size}`);
                    const link = document.createElement('a');
                    const filename = size === 180 ? 'apple-touch-icon.png' :
                                    size === 192 ? 'android-chrome-192x192.png' :
                                    size === 512 ? 'android-chrome-512x512.png' :
                                    `favicon-${size}x${size}.png`;
                    link.download = filename;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                }, index * 150);
            });
            CodeUtils.Message.success('Downloading all favicon sizes...');
        }

        // Generate ICO blob (multi-size ICO file)
        async function generateIcoBlob() {
            // Create a simple ICO file with 16x16, 32x32, and 64x64
            const sizes = [16, 32, 64];
            const images = [];

            for (const size of sizes) {
                const canvas = document.getElementById(`preview${size}`);
                const imageData = await getImageData(canvas, size);
                images.push(imageData);
            }

            return createIcoFile(images);
        }

        // Get image data from canvas
        async function getImageData(canvas, size) {
            return new Promise((resolve) => {
                canvas.toBlob((blob) => {
                    const reader = new FileReader();
                    reader.onload = () => {
                        resolve({
                            size: size,
                            data: new Uint8Array(reader.result)
                        });
                    };
                    reader.readAsArrayBuffer(blob);
                });
            });
        }

        // Create ICO file from PNG images
        function createIcoFile(images) {
            // ICO header (6 bytes)
            const iconDirSize = 6 + (images.length * 16);
            let offset = iconDirSize;
            let totalSize = iconDirSize;

            images.forEach(img => {
                totalSize += img.data.length;
            });

            const buffer = new ArrayBuffer(totalSize);
            const view = new DataView(buffer);
            const bytes = new Uint8Array(buffer);

            // Write ICONDIR
            view.setUint16(0, 0, true); // Reserved
            view.setUint16(2, 1, true); // Type (1 = ICO)
            view.setUint16(4, images.length, true); // Number of images

            // Write ICONDIRENTRY for each image
            images.forEach((img, i) => {
                const entryOffset = 6 + (i * 16);
                view.setUint8(entryOffset + 0, img.size === 256 ? 0 : img.size); // Width
                view.setUint8(entryOffset + 1, img.size === 256 ? 0 : img.size); // Height
                view.setUint8(entryOffset + 2, 0); // Color palette
                view.setUint8(entryOffset + 3, 0); // Reserved
                view.setUint16(entryOffset + 4, 1, true); // Color planes
                view.setUint16(entryOffset + 6, 32, true); // Bits per pixel
                view.setUint32(entryOffset + 8, img.data.length, true); // Image size
                view.setUint32(entryOffset + 12, offset, true); // Image offset

                // Write image data
                bytes.set(img.data, offset);
                offset += img.data.length;
            });

            return new Blob([buffer], { type: 'image/x-icon' });
        }

        // Download ICO file
        async function downloadIco() {
            try {
                const blob = await generateIcoBlob();
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'favicon.ico';
                link.click();
                CodeUtils.Message.success('favicon.ico downloaded!');
            } catch (error) {
                CodeUtils.Message.error('Error creating ICO file: ' + error.message);
            }
        }

        // Initialize on load
        init();
    </script>
</body>

</html>