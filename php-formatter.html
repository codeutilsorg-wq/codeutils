<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL: Apply theme immediately to prevent flash -->
    <script>
        (function() {
            const theme = localStorage.getItem('codeutils-theme');
            if (theme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free PHP Formatter & Beautifier | Format PHP Code Online - Code Utils</title>
    <meta name="description" content="Format and beautify PHP code instantly with proper indentation. Fix messy PHP syntax, improve readability. 100% private browser-based tool. Try it now!">
    <meta name="keywords" content="php formatter, php beautifier, format php, php code formatter, php indent">
    <link rel="canonical" href="https://codeutils.org/php-formatter">

    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#3498db">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/php-formatter">
    <meta property="og:title" content="Free PHP Formatter & Beautifier - Code Utils">
    <meta property="og:description" content="Format and beautify PHP code online with proper indentation. Fix syntax and improve readability. 100% private client-side processing.">
    <meta property="og:image" content="https://codeutils.org/images/og/php-formatter.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="PHP Formatter - Free PHP code beautifier">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PHP Formatter & Beautifier - Code Utils">
    <meta name="twitter:description" content="Format and beautify PHP code online with proper indentation. Free tool with 100% private processing.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/php-formatter.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">        <!-- Google Analytics (only load in production) -->
    <script>
        // Only load Google Analytics if NOT on localhost
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            // Load gtag.js
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291';
            document.head.appendChild(script);

            // Initialize GA
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-RPHPBJ4291');
        } else {
            // Mock gtag function for localhost (prevents errors)
            window.gtag = function() {
                console.log('GA (localhost - not tracked):', arguments);
            };
        }
    </script>

    <!-- Structured Data: WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "PHP Formatter - Code Utils",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Free PHP formatter and beautifier. Format PHP code with proper indentation and syntax. 100% client-side processing.",
      "url": "https://codeutils.org/php-formatter",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0"
    }
    </script>

    <link rel="stylesheet" href="css/common.css">
    <style>
        .options-row {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }
        .options-row label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        .options-row select {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
            <h2 style="margin-bottom: var(--spacing-xs); color: var(--primary);">PHP Formatter</h2>
            <p style="margin: 0; color: var(--text-secondary);">Format and beautify PHP code.</p>
        </div>

        <div class="editor-section">
            <div class="editor-header">PHP Input</div>
            <textarea id="phpInput" class="editor" placeholder="<?php
echo 'Hello World';
$arr=['a'=>1,'b'=>2];
foreach($arr as $k=>$v){echo $k.$v;}
?>"></textarea>
        </div>

        <div class="options-row">
            <label>
                Indent:
                <select id="indentType">
                    <option value="4">4 Spaces</option>
                    <option value="2">2 Spaces</option>
                    <option value="tab">Tab</option>
                </select>
            </label>
            <label>
                <input type="checkbox" id="bracesNewLine">
                Braces on new line
            </label>
        </div>

        <div class="controls">
            <button class="btn" onclick="formatPHP()">Format PHP</button>
            <button class="btn btn-secondary" onclick="copyOutput()">Copy</button>
            <button class="btn btn-secondary" onclick="downloadPHP()">Download</button>
            <button class="btn btn-outline" onclick="clearAll()">Clear</button>
        </div>

        <div id="message" class="message"></div>

        <div class="editor-section">
            <div class="editor-header">Formatted PHP</div>
            <textarea id="phpOutput" class="editor" readonly placeholder="Formatted PHP will appear here..."></textarea>
        </div>

        <!-- Related Tools -->
        <div class="related-tools">
            <h3>Related Tools</h3>
            <div class="related-tools-grid">
                <a href="json-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">{ }</span>
                    <span class="related-tool-name">JSON Formatter</span>
                </a>
                <a href="sql-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">SQL</span>
                    <span class="related-tool-name">SQL Formatter</span>
                </a>
                <a href="html-encoder.html" class="related-tool-card">
                    <span class="related-tool-icon">&;</span>
                    <span class="related-tool-name">HTML Encoder</span>
                </a>
            </div>
        </div>

        <div class="info-section">
            <h2>About PHP Formatter</h2>
            <p>PHP code in legacy applications, open-source projects, and production servers is often minified, concatenated, or simply poorly indented—making maintenance and debugging incredibly frustrating. Our PHP Formatter instantly beautifies any PHP code with proper indentation, consistent spacing around operators, and clean structure for functions, classes, and control flow. Whether you are working on a WordPress plugin, a Laravel application, or a standalone PHP script, this tool transforms messy code into clean, professional PHP. All processing happens entirely in your browser, so your code remains completely private.</p>

            <h3>Key Features</h3>
            <ul>
                <li><strong>Beautify PHP:</strong> Transform minified or poorly formatted PHP into readable, well-indented code</li>
                <li><strong>Minify PHP:</strong> Remove comments, extra whitespace, and newlines to reduce file size for production use</li>
                <li><strong>Handle Mixed Content:</strong> Correctly format PHP files that mix PHP code with HTML markup</li>
                <li><strong>Multiple Indentation Options:</strong> Choose between 2 spaces, 4 spaces (PSR-2 standard), or tabs</li>
                <li><strong>File Upload Support:</strong> Upload .php files directly from your computer or drag and drop them</li>
                <li><strong>One-Click Copy:</strong> Instantly copy the formatted output to your clipboard</li>
                <li><strong>Download Output:</strong> Save the formatted PHP as a .php file to your computer</li>
                <li><strong>Privacy First:</strong> 100% client-side processing—your PHP code never leaves your browser</li>
            </ul>

            <h3>How to Use This Tool</h3>

            <p><strong>Method 1: Paste PHP Code</strong></p>
            <ol>
                <li>Copy your PHP code from your editor, FTP client, or server file</li>
                <li>Paste it into the input text area on the left side</li>
                <li>Click "Format" to beautify or "Minify" to compact the code</li>
                <li>The formatted output appears instantly in the output area on the right</li>
                <li>Copy or download the result as needed</li>
            </ol>

            <p><strong>Method 2: Upload a PHP File</strong></p>
            <ol>
                <li>Click the "Upload" button or drag and drop your .php file into the designated area</li>
                <li>The file content will automatically load into the input area</li>
                <li>Format as needed, then use the "Download" button to save the result</li>
            </ol>

            <h3>Common Use Cases</h3>

            <p><strong>WordPress Plugin and Theme Development</strong></p>
            <p>WordPress plugins and themes often contain PHP code that mixes business logic with HTML templating, resulting in complex files that are hard to read without proper formatting. Before modifying a plugin or debugging a theme issue, run the PHP through this formatter to see the clean structure. This helps you understand the code flow, identify hook and filter placements, and modify the code safely without accidentally breaking the logic.</p>

            <p><strong>Reading Open-Source PHP Projects</strong></p>
            <p>Many PHP projects on GitHub contain inconsistently formatted code from multiple contributors using different coding styles. When studying an open-source project or preparing to contribute, use this formatter to normalize the code to a consistent style. This makes it much easier to understand the codebase architecture, identify patterns, and write contributions that fit the project's style.</p>

            <p><strong>Legacy Code Modernization</strong></p>
            <p>Legacy PHP applications written before PSR standards often have mixed indentation, no consistent spacing, and complex nested control structures. Before beginning a refactoring project, format all PHP files to normalize indentation and structure. Clean formatting makes it easier to identify code smells, extract methods, and systematically improve the codebase one function at a time.</p>

            <h3>Tips &amp; Best Practices</h3>
            <ul>
                <li><strong>Follow PSR-12 standards:</strong> Use 4-space indentation (the PSR-2/PSR-12 standard) for PHP code to ensure compatibility with popular PHP tools, IDEs, and frameworks like Laravel and Symfony</li>
                <li><strong>Keep logic and presentation separate:</strong> Well-formatted PHP should help reveal whether business logic is mixed with HTML output—if you see this after formatting, consider refactoring to separate concerns</li>
                <li><strong>Always backup before bulk formatting:</strong> When formatting entire legacy codebases, always backup files first—while formatting should not change behavior, testing after formatting is essential</li>
                <li><strong>Check syntax after formatting:</strong> Run php -l filename.php after formatting to verify syntax validity, especially if the formatter had to handle unusual code patterns</li>
            </ul>

            <h3>Frequently Asked Questions</h3>

            <p><strong>Q: Is my PHP code safe when using this tool?</strong></p>
            <p>A: Yes, absolutely! All PHP formatting happens entirely in your browser using JavaScript. Your code—including any database credentials, API keys, or business logic it contains—never leaves your computer and is never uploaded to any server. This makes our tool completely safe for proprietary applications and code containing sensitive configuration values.</p>

            <p><strong>Q: Can this tool format PHP mixed with HTML?</strong></p>
            <p>A: Yes! The formatter handles PHP files that mix PHP code blocks with HTML markup, which is common in WordPress themes and older PHP applications. Both the PHP logic sections and the HTML template portions will be properly indented according to their context.</p>

            <p><strong>Q: Does formatting change the behavior of my PHP code?</strong></p>
            <p>A: No—formatting only adds or removes whitespace and adjusts indentation, never changing the actual code logic, variable names, or functionality. The formatted PHP is syntactically and functionally identical to the original. However, always test your application after formatting to verify everything works as expected, especially for complex heredoc strings and formatted output strings.</p>

            <p><strong>Q: Do I need to create an account or sign up?</strong></p>
            <p>A: No! All our tools are completely free and don't require any registration, sign-up, or account creation. Just visit the page and start using the PHP formatter immediately. There are no limits on usage, no premium tiers, and no hidden fees.</p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
        <p>Free developer utilities - 100% client-side processing</p>
    </footer>

    <script src="js/common.js"></script>
    <script>
        CodeUtils.RecentTools.add({
            id: 'php-formatter',
            name: 'PHP Formatter',
            url: 'php-formatter.html'
        });

        CodeUtils.Message.init('message');

        function formatPHP() {
            const input = document.getElementById('phpInput').value;
            if (!input.trim()) {
                CodeUtils.Message.error('Please enter PHP code');
                return;
            }

            const indentType = document.getElementById('indentType').value;
            const bracesNewLine = document.getElementById('bracesNewLine').checked;
            const indent = indentType === 'tab' ? '\t' : ' '.repeat(parseInt(indentType));

            try {
                const formatted = formatPHPCode(input, indent, bracesNewLine);
                document.getElementById('phpOutput').value = formatted;
                CodeUtils.Message.success('PHP formatted!');
            } catch (e) {
                CodeUtils.Message.error('Error formatting PHP: ' + e.message);
            }
        }

        function formatPHPCode(code, indent, bracesNewLine) {
            let result = '';
            let indentLevel = 0;
            let inString = false;
            let stringChar = '';
            let inComment = false;
            let inMultiComment = false;

            // Normalize line endings
            code = code.replace(/\r\n/g, '\n').replace(/\r/g, '\n');

            // Split by lines for easier processing
            const lines = code.split('\n');
            const formattedLines = [];

            for (let line of lines) {
                let trimmed = line.trim();
                if (!trimmed) {
                    formattedLines.push('');
                    continue;
                }

                // Handle multi-line comments
                if (inMultiComment) {
                    formattedLines.push(indent.repeat(indentLevel) + trimmed);
                    if (trimmed.includes('*/')) {
                        inMultiComment = false;
                    }
                    continue;
                }

                if (trimmed.startsWith('/*')) {
                    inMultiComment = !trimmed.includes('*/');
                    formattedLines.push(indent.repeat(indentLevel) + trimmed);
                    continue;
                }

                // Handle single-line comments
                if (trimmed.startsWith('//') || trimmed.startsWith('#')) {
                    formattedLines.push(indent.repeat(indentLevel) + trimmed);
                    continue;
                }

                // Decrease indent for closing braces
                if (trimmed.startsWith('}') || trimmed.startsWith(')') || trimmed.startsWith(']')) {
                    indentLevel = Math.max(0, indentLevel - 1);
                }

                // Handle case and default in switch
                if (trimmed.startsWith('case ') || trimmed.startsWith('default:')) {
                    indentLevel = Math.max(0, indentLevel - 1);
                    formattedLines.push(indent.repeat(indentLevel) + trimmed);
                    indentLevel++;
                    continue;
                }

                // Format the line
                let formattedLine = trimmed;

                // Handle braces on new line
                if (bracesNewLine && trimmed.includes('{') && !trimmed.startsWith('{')) {
                    const parts = trimmed.split('{');
                    if (parts.length === 2 && parts[0].trim()) {
                        formattedLines.push(indent.repeat(indentLevel) + parts[0].trim());
                        formattedLine = '{' + parts[1];
                        trimmed = formattedLine.trim();
                    }
                }

                formattedLines.push(indent.repeat(indentLevel) + trimmed);

                // Increase indent for opening braces
                if (trimmed.endsWith('{') || trimmed.endsWith('(') || trimmed.endsWith('[')) {
                    indentLevel++;
                }

                // Handle inline opening/closing
                const opens = (trimmed.match(/{/g) || []).length;
                const closes = (trimmed.match(/}/g) || []).length;
                if (opens > closes && !trimmed.endsWith('{')) {
                    indentLevel += (opens - closes);
                }
            }

            return formattedLines.join('\n');
        }

        function copyOutput() {
            const output = document.getElementById('phpOutput').value;
            if (!output) {
                CodeUtils.Message.error('Nothing to copy');
                return;
            }
            CodeUtils.Clipboard.copy(output);
            CodeUtils.Message.success('Copied!');
        }

        function downloadPHP() {
            const output = document.getElementById('phpOutput').value;
            if (!output) {
                CodeUtils.Message.error('Nothing to download');
                return;
            }
            CodeUtils.FileHandler.download(output, 'formatted.php', 'text/x-php');
            CodeUtils.Message.success('Downloaded!');
        }

        function clearAll() {
            document.getElementById('phpInput').value = '';
            document.getElementById('phpOutput').value = '';
        }
    </script>
</body>
</html>
