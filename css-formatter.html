<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL: Apply theme immediately to prevent flash -->
    <script>
        (function() {
            const theme = localStorage.getItem('codeutils-theme');
            if (theme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Formatter | Beautify & Minify CSS Online - Code Utils</title>
    <meta name="description" content="Format, beautify, and minify CSS code with proper indentation instantly. Fix messy stylesheets, compress CSS files. 100% private client-side processing. Format now!">
    <meta name="keywords" content="css formatter, css beautifier, css minifier, format css, beautify css, minify css, css tool, free css formatter">
    <link rel="canonical" href="https://codeutils.org/css-formatter">

    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#3498db">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/css-formatter">
    <meta property="og:title" content="CSS Formatter - Code Utils">
    <meta property="og:description" content="Format, beautify, and minify CSS code with proper indentation. 100% private client-side processing.">
    <meta property="og:image" content="https://codeutils.org/images/og/css-formatter.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="CSS Formatter - Free online tool">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CSS Formatter - Code Utils">
    <meta name="twitter:description" content="Format and minify CSS instantly. Free tool with 100% private processing.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/css-formatter.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">        <!-- Google Analytics (only load in production) -->
    <script>
        // Only load Google Analytics if NOT on localhost
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            // Load gtag.js
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291';
            document.head.appendChild(script);

            // Initialize GA
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-RPHPBJ4291');
        } else {
            // Mock gtag function for localhost (prevents errors)
            window.gtag = function() {
                console.log('GA (localhost - not tracked):', arguments);
            };
        }
    </script>

    <!-- Structured Data: WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "CSS Formatter - Code Utils",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Free CSS formatter and beautifier. Format, beautify, and minify CSS stylesheets with proper indentation. 100% client-side processing.",
      "url": "https://codeutils.org/css-formatter",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0"
    }
    </script>

    <link rel="stylesheet" href="css/common.css">
    <style>
        .options-row {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }
        .options-row label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        .indent-select {
            padding: var(--spacing-xs);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
            <h2 style="margin-bottom: var(--spacing-xs); color: var(--primary);">CSS Formatter</h2>
            <p style="margin: 0; color: var(--text-secondary);">Beautify and minify CSS code. All processing happens in your browser.</p>
        </div>

        <div class="drop-zone" id="dropZone">
            Drop CSS file here or click Upload File button
        </div>

        <div class="controls">
            <div class="controls-group">
                <button class="btn" onclick="formatCSS()" title="Format CSS (Ctrl+Enter)">Format</button>
                <button class="btn" onclick="minifyCSS()" title="Minify CSS (Ctrl+M)">Minify</button>
            </div>
            <div class="controls-group">
                <button class="btn btn-secondary" onclick="copyOutput()" title="Copy Output (Ctrl+K)">Copy</button>
                <label for="fileUpload" class="btn btn-secondary" style="margin: 0;">Upload</label>
                <input type="file" id="fileUpload" class="file-upload" accept=".css,text/css">
                <button class="btn btn-secondary" onclick="downloadCSS()">Download</button>
            </div>
            <button class="btn btn-outline" onclick="clearAll()">Clear</button>
        </div>

        <div class="options-row">
            <label>
                Indent:
                <select id="indentSelect" class="indent-select">
                    <option value="2">2 spaces</option>
                    <option value="4">4 spaces</option>
                    <option value="tab">Tab</option>
                </select>
            </label>
        </div>

        <div id="message" class="message"></div>

        <div class="editor-container">
            <div class="editor-section">
                <div class="editor-header">Input CSS</div>
                <textarea id="inputCSS" class="editor" placeholder="Paste your CSS here..."></textarea>
            </div>
            <div class="editor-section">
                <div class="editor-header">Output</div>
                <textarea id="outputCSS" class="editor" readonly placeholder="Formatted CSS will appear here..."></textarea>
            </div>
        </div>

        <!-- Related Tools -->
        <div class="related-tools">
            <h3>Related Tools</h3>
            <div class="related-tools-grid">
                <a href="html-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon"><></span>
                    <span class="related-tool-name">HTML Formatter</span>
                </a>
                <a href="js-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">JS</span>
                    <span class="related-tool-name">JavaScript Formatter</span>
                </a>
                <a href="json-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">{ }</span>
                    <span class="related-tool-name">JSON Formatter</span>
                </a>
                <a href="color-converter.html" class="related-tool-card">
                    <span class="related-tool-icon">#C</span>
                    <span class="related-tool-name">Color Converter</span>
                </a>
            </div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <h2>About CSS Formatter</h2>
            <p>CSS code from production sites, minified stylesheets, and CSS frameworks is often compressed into unreadable single-line formats that make editing and debugging extremely difficult. Our CSS Formatter instantly beautifies any CSS with proper indentation, rule spacing, and property alignment—making stylesheets easy to read, edit, and maintain. Whether you are working with third-party CSS, debugging styles, or preparing stylesheets for production, this tool provides everything you need. All processing happens entirely in your browser, ensuring your code stays private.</p>

            <h3>Key Features</h3>
            <ul>
                <li><strong>Beautify CSS:</strong> Transform minified or poorly formatted CSS into clean, readable stylesheets with proper indentation</li>
                <li><strong>Minify CSS:</strong> Remove all unnecessary whitespace, comments, and line breaks to create compact CSS for production use</li>
                <li><strong>Multiple Indentation Options:</strong> Choose 2 spaces, 4 spaces, or tabs to match your project's coding standards</li>
                <li><strong>File Upload Support:</strong> Upload .css files directly from your computer or drag and drop them into the tool</li>
                <li><strong>One-Click Copy:</strong> Instantly copy the formatted output to your clipboard for immediate use</li>
                <li><strong>Download Output:</strong> Save the formatted or minified CSS as a .css file to your computer</li>
                <li><strong>Real-Time Processing:</strong> Instant formatting without server round-trips or page reloads</li>
                <li><strong>Privacy First:</strong> 100% client-side processing—your stylesheets never leave your browser</li>
            </ul>

            <h3>How to Use This Tool</h3>

            <p><strong>Method 1: Paste CSS Code</strong></p>
            <ol>
                <li>Copy your CSS from your text editor, browser DevTools, or CDN source</li>
                <li>Paste it into the input text area on the left side</li>
                <li>Click the "Format" button to beautify or "Minify" to compact the CSS</li>
                <li>The formatted output appears instantly in the output area on the right</li>
                <li>Use the "Copy" button to copy the result or "Download" to save it</li>
            </ol>

            <p><strong>Method 2: Upload a CSS File</strong></p>
            <ol>
                <li>Click the "Upload" button or drag and drop your .css file into the designated area</li>
                <li>The file content will automatically load into the input area</li>
                <li>Format or minify as needed, then download the result using the "Download" button</li>
            </ol>

            <h3>Common Use Cases</h3>

            <p><strong>Debugging Production Stylesheets</strong></p>
            <p>When your website has styling issues in production, the problem is often in your minified CSS. Copy the minified stylesheet from your browser's DevTools Network tab, paste it into this formatter, and instantly see all your CSS rules clearly structured. This makes it much easier to spot overrides, conflicting selectors, and missing properties that cause layout problems.</p>

            <p><strong>Working with CSS Frameworks</strong></p>
            <p>Popular CSS frameworks like Bootstrap, Tailwind, and Bulma distribute minified CSS files that are difficult to customize. When you need to understand how a framework styles specific components, paste the relevant CSS into this formatter to see the exact selectors, properties, and values used—helping you write more specific override rules.</p>

            <p><strong>Optimizing Stylesheets for Production</strong></p>
            <p>Before deploying your website, minifying CSS files reduces their size and improves page load performance. Remove all comments, extra whitespace, and unnecessary characters to create the smallest possible stylesheet. This directly impacts your Google PageSpeed scores and Core Web Vitals, which affect both user experience and SEO rankings.</p>

            <h3>Tips &amp; Best Practices</h3>
            <ul>
                <li><strong>Maintain both versions:</strong> Keep a formatted source CSS file in your repository and generate the minified version during your build process—never minify your working source files directly</li>
                <li><strong>Use consistent property ordering:</strong> Consider organizing properties in a consistent order (layout → box model → typography → visual) for better long-term maintainability</li>
                <li><strong>Check vendor prefixes:</strong> After formatting, review that vendor prefixes (-webkit-, -moz-, -ms-) are correctly grouped with their standard property counterparts</li>
                <li><strong>Validate after formatting:</strong> Use browser DevTools to verify your formatted CSS still renders correctly—some malformed CSS is forgiven by browsers but may fail after reformatting</li>
            </ul>

            <h3>Frequently Asked Questions</h3>

            <p><strong>Q: Is my CSS code safe when using this tool?</strong></p>
            <p>A: Yes, absolutely! All CSS formatting happens entirely in your browser using JavaScript. Your stylesheets never leave your computer and are never uploaded to any server. This makes our tool completely safe for proprietary CSS, internal design systems, and stylesheets containing business-sensitive class names. You can even use this tool offline after the initial page load.</p>

            <p><strong>Q: Can I format SCSS or LESS files with this tool?</strong></p>
            <p>A: This tool is optimized for standard CSS. Basic SCSS syntax may partially format, but SCSS-specific features like nesting and variables are not fully supported. For standard CSS output compiled from SCSS/LESS, this tool works perfectly.</p>

            <p><strong>Q: How much can minifying CSS reduce file size?</strong></p>
            <p>A: CSS minification typically reduces file size by 20-50%, depending on how many comments and whitespace characters are in the original. Stylesheets with extensive comments can see reductions of 60% or more. When combined with gzip compression on your server, the savings are even greater.</p>

            <p><strong>Q: Do I need to create an account or sign up?</strong></p>
            <p>A: No! All our tools are completely free and don't require any registration, sign-up, or account creation. Just visit the page and start using the CSS formatter immediately. There are no limits on usage, no premium tiers, and no hidden fees.</p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
        <p>Free developer utilities - 100% client-side processing</p>
    </footer>

    <script src="js/common.js"></script>
    <script>
        // Track this tool visit
        CodeUtils.RecentTools.add({
            id: 'css-formatter',
            name: 'CSS Formatter',
            url: 'css-formatter.html'
        });

        // DOM elements
        const inputCSS = document.getElementById('inputCSS');
        const outputCSS = document.getElementById('outputCSS');
        const fileUpload = document.getElementById('fileUpload');
        const indentSelect = document.getElementById('indentSelect');

        // Initialize message handler
        CodeUtils.Message.init('message');

        // Initialize drag and drop
        CodeUtils.DragDrop.init('dropZone', async (file) => {
            const sizeCheck = CodeUtils.FileHandler.checkSize(file);
            if (sizeCheck.level === 'error') {
                CodeUtils.Message.error(sizeCheck.message);
                return;
            } else if (sizeCheck.level === 'warning') {
                CodeUtils.Message.warning(sizeCheck.message);
            }

            try {
                const content = await CodeUtils.FileHandler.readAsText(file);
                inputCSS.value = content;
                CodeUtils.Message.success('File loaded successfully!');
            } catch (err) {
                CodeUtils.Message.error('Error reading file');
            }
        });

        // File upload handler
        fileUpload.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const sizeCheck = CodeUtils.FileHandler.checkSize(file);
            if (sizeCheck.level === 'error') {
                CodeUtils.Message.error(sizeCheck.message);
                return;
            } else if (sizeCheck.level === 'warning') {
                CodeUtils.Message.warning(sizeCheck.message);
            }

            try {
                const content = await CodeUtils.FileHandler.readAsText(file);
                inputCSS.value = content;
                CodeUtils.Message.success('File loaded successfully!');
            } catch (err) {
                CodeUtils.Message.error('Error reading file');
            }
        });

        // Get indent string based on selection
        function getIndent() {
            const value = indentSelect.value;
            if (value === 'tab') return '\t';
            return ' '.repeat(parseInt(value));
        }

        // Format CSS
        function formatCSS() {
            const input = inputCSS.value.trim();
            if (!input) {
                CodeUtils.Message.error('Please enter some CSS to format');
                return;
            }

            try {
                const indent = getIndent();
                const formatted = beautifyCSS(input, indent);
                outputCSS.value = formatted;
                CodeUtils.Message.success('CSS formatted successfully!');
            } catch (error) {
                CodeUtils.Message.error('Error formatting CSS: ' + error.message);
                outputCSS.value = '';
            }
        }

        // Beautify CSS
        function beautifyCSS(css, indent) {
            let result = '';
            let level = 0;
            let inString = false;
            let stringChar = '';
            let inComment = false;
            let i = 0;

            // Remove existing formatting
            css = css.replace(/\r\n/g, '\n').replace(/\r/g, '\n');

            while (i < css.length) {
                const char = css[i];
                const nextChar = css[i + 1] || '';
                const prevChar = css[i - 1] || '';

                // Handle comments
                if (!inString && char === '/' && nextChar === '*') {
                    // Start of comment
                    result += '\n' + indent.repeat(level) + '/*';
                    i += 2;
                    inComment = true;
                    continue;
                }

                if (inComment && char === '*' && nextChar === '/') {
                    // End of comment
                    result += '*/\n';
                    i += 2;
                    inComment = false;
                    continue;
                }

                if (inComment) {
                    result += char;
                    i++;
                    continue;
                }

                // Handle strings
                if ((char === '"' || char === "'") && prevChar !== '\\') {
                    if (!inString) {
                        inString = true;
                        stringChar = char;
                    } else if (char === stringChar) {
                        inString = false;
                    }
                    result += char;
                    i++;
                    continue;
                }

                if (inString) {
                    result += char;
                    i++;
                    continue;
                }

                // Handle brackets
                if (char === '{') {
                    result = result.trimEnd() + ' {\n';
                    level++;
                    i++;
                    continue;
                }

                if (char === '}') {
                    level = Math.max(0, level - 1);
                    result = result.trimEnd() + '\n' + indent.repeat(level) + '}\n';
                    if (level === 0) {
                        result += '\n';
                    }
                    i++;
                    continue;
                }

                // Handle semicolons
                if (char === ';') {
                    result += ';\n' + indent.repeat(level);
                    i++;
                    // Skip whitespace after semicolon
                    while (i < css.length && /\s/.test(css[i])) {
                        i++;
                    }
                    continue;
                }

                // Handle colons (property: value)
                if (char === ':') {
                    // Check if it's not a pseudo-selector
                    const beforeColon = result.trim().split(/\s+/).pop() || '';
                    if (!beforeColon.match(/^(hover|active|focus|visited|first-child|last-child|nth-child|before|after|not|where|is|has|root|empty|target|enabled|disabled|checked|first-of-type|last-of-type|only-child|only-of-type|first|left|right|lang|dir|any-link|local-link|scope|current|past|future|playing|paused|defined|host|host-context|slotted|fullscreen|modal|picture-in-picture|autofill|placeholder-shown|default|valid|invalid|in-range|out-of-range|required|optional|read-only|read-write|placeholder|selection|marker|backdrop|spelling-error|grammar-error|cue|cue-region)$/)) {
                        result += ': ';
                    } else {
                        result += ':';
                    }
                    i++;
                    // Skip whitespace after colon
                    while (i < css.length && /\s/.test(css[i])) {
                        i++;
                    }
                    continue;
                }

                // Handle whitespace
                if (/\s/.test(char)) {
                    // Collapse multiple whitespace to single space
                    if (result.length > 0 && !/\s/.test(result[result.length - 1]) && result[result.length - 1] !== '\n') {
                        result += ' ';
                    }
                    i++;
                    continue;
                }

                // Handle selector start (after newline at level 0)
                if (level === 0 && result.endsWith('\n\n') && /[a-zA-Z.#@*\[]/.test(char)) {
                    result = result.trimEnd() + '\n';
                }

                // Add indentation after newline
                if (result.endsWith('\n') && char !== '}' && !/\s/.test(char)) {
                    result += indent.repeat(level);
                }

                result += char;
                i++;
            }

            // Clean up result
            result = result.trim();
            // Remove multiple blank lines
            result = result.replace(/\n{3,}/g, '\n\n');
            // Remove trailing whitespace from lines
            result = result.split('\n').map(line => line.trimEnd()).join('\n');

            return result;
        }

        // Minify CSS
        function minifyCSS() {
            const input = inputCSS.value.trim();
            if (!input) {
                CodeUtils.Message.error('Please enter some CSS to minify');
                return;
            }

            try {
                let minified = input;

                // Remove comments
                minified = minified.replace(/\/\*[\s\S]*?\*\//g, '');

                // Remove whitespace
                minified = minified.replace(/\s+/g, ' ');

                // Remove spaces around special characters
                minified = minified.replace(/\s*{\s*/g, '{');
                minified = minified.replace(/\s*}\s*/g, '}');
                minified = minified.replace(/\s*;\s*/g, ';');
                minified = minified.replace(/\s*:\s*/g, ':');
                minified = minified.replace(/\s*,\s*/g, ',');

                // Remove last semicolon before }
                minified = minified.replace(/;}/g, '}');

                // Trim
                minified = minified.trim();

                outputCSS.value = minified;
                CodeUtils.Message.success('CSS minified successfully!');
            } catch (error) {
                CodeUtils.Message.error('Error minifying CSS: ' + error.message);
                outputCSS.value = '';
            }
        }

        // Copy output
        async function copyOutput() {
            if (!outputCSS.value) {
                CodeUtils.Message.error('Nothing to copy');
                return;
            }

            try {
                await CodeUtils.Clipboard.copy(outputCSS.value);
                CodeUtils.Message.success('Copied to clipboard!');
            } catch (err) {
                CodeUtils.Message.error(err.message);
            }
        }

        // Download CSS
        function downloadCSS() {
            if (!outputCSS.value) {
                CodeUtils.Message.error('Nothing to download');
                return;
            }
            CodeUtils.FileHandler.download(outputCSS.value, 'formatted.css', 'text/css');
            CodeUtils.Message.success('File downloaded!');
        }

        // Clear all
        function clearAll() {
            inputCSS.value = '';
            outputCSS.value = '';
            CodeUtils.Message.hide();
        }

        // Keyboard shortcuts
        CodeUtils.Shortcuts.register('Enter', formatCSS, true);
        CodeUtils.Shortcuts.register('m', minifyCSS, true);
        CodeUtils.Shortcuts.register('k', copyOutput, true);
    </script>
</body>
</html>
