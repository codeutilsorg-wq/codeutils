<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL: Apply theme immediately to prevent flash -->
    <script>
        (function() {
            const theme = localStorage.getItem('codeutils-theme');
            if (theme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Python Formatter & Beautifier | PEP8 Formatter - Code Utils</title>
    <meta name="description" content="Format Python code with proper indentation instantly. PEP8-compliant beautification for clean, readable code. 100% private browser-based tool. Try it now!">
    <meta name="keywords" content="python formatter, python beautifier, format python, python code formatter, pep8 formatter">
    <link rel="canonical" href="https://codeutils.org/python-formatter">

    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#3498db">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://codeutils.org/python-formatter">
    <meta property="og:title" content="Free Python Formatter & Beautifier - Code Utils">
    <meta property="og:description" content="Format Python code with proper indentation and PEP8 compliance. Beautify code for better readability. 100% private client-side processing.">
    <meta property="og:image" content="https://codeutils.org/images/og/python-formatter.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Python Formatter - Free Python code beautifier">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Python Formatter & Beautifier - Code Utils">
    <meta name="twitter:description" content="Format Python code with proper indentation. Free PEP8-compliant tool with 100% private processing.">
    <meta name="twitter:image" content="https://codeutils.org/images/og/python-formatter.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">        <!-- Google Analytics (only load in production) -->
    <script>
        // Only load Google Analytics if NOT on localhost
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            // Load gtag.js
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-RPHPBJ4291';
            document.head.appendChild(script);

            // Initialize GA
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-RPHPBJ4291');
        } else {
            // Mock gtag function for localhost (prevents errors)
            window.gtag = function() {
                console.log('GA (localhost - not tracked):', arguments);
            };
        }
    </script>

    <!-- Structured Data: WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Python Formatter - Code Utils",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Free Python formatter and beautifier. Format Python code with proper indentation and PEP8 compliance. 100% client-side processing.",
      "url": "https://codeutils.org/python-formatter",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0"
    }
    </script>

    <link rel="stylesheet" href="css/common.css">
    <style>
        .options-row {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }
        .options-row label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        .options-row select {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="header-logo">
                <h1>Code Utils</h1>
            </a>
            <nav class="header-nav">
                <a href="index.html" class="btn btn-outline btn-sm">All Tools</a>
                <button class="theme-toggle" onclick="CodeUtils.Theme.toggle()">Toggle Dark Mode</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
            <h2 style="margin-bottom: var(--spacing-xs); color: var(--primary);">Python Formatter</h2>
            <p style="margin: 0; color: var(--text-secondary);">Format and beautify Python code with proper indentation.</p>
        </div>

        <div class="editor-section">
            <div class="editor-header">Python Input</div>
            <textarea id="pythonInput" class="editor" placeholder="def hello():
print('Hello World')
for i in range(10):
print(i)"></textarea>
        </div>

        <div class="options-row">
            <label>
                Indent:
                <select id="indentSize">
                    <option value="4" selected>4 Spaces (PEP 8)</option>
                    <option value="2">2 Spaces</option>
                    <option value="tab">Tab</option>
                </select>
            </label>
            <label>
                <input type="checkbox" id="addBlankLines" checked>
                Add blank lines between functions
            </label>
        </div>

        <div class="controls">
            <button class="btn" onclick="formatPython()">Format Python</button>
            <button class="btn btn-secondary" onclick="copyOutput()">Copy</button>
            <button class="btn btn-secondary" onclick="downloadPython()">Download</button>
            <button class="btn btn-outline" onclick="clearAll()">Clear</button>
        </div>

        <div id="message" class="message"></div>

        <div class="editor-section">
            <div class="editor-header">Formatted Python</div>
            <textarea id="pythonOutput" class="editor" readonly placeholder="Formatted Python will appear here..."></textarea>
        </div>

        <!-- Related Tools -->
        <div class="related-tools">
            <h3>Related Tools</h3>
            <div class="related-tools-grid">
                <a href="json-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">{ }</span>
                    <span class="related-tool-name">JSON Formatter</span>
                </a>
                <a href="yaml-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">YML</span>
                    <span class="related-tool-name">YAML Formatter</span>
                </a>
                <a href="sql-formatter.html" class="related-tool-card">
                    <span class="related-tool-icon">SQL</span>
                    <span class="related-tool-name">SQL Formatter</span>
                </a>
            </div>
        </div>

        <div class="info-section">
            <h2>About Python Formatter</h2>
            <p>Python's syntax is indentation-based, making consistent formatting not just a style preference but a functional requirement. Inconsistent indentation causes syntax errors, while inconsistent style makes code harder to read and maintain. Our Python Formatter instantly formats Python code according to PEP 8 standards—the official Python style guide—with proper indentation, line length management, and spacing around operators. Whether you are cleaning up notebook code, preparing scripts for code review, or learning Python, this tool ensures your code meets professional standards. All processing happens entirely in your browser for complete privacy.</p>

            <h3>Key Features</h3>
            <ul>
                <li><strong>PEP 8 Compliant Formatting:</strong> Format Python code according to the official Python style guide for professional, readable code</li>
                <li><strong>Proper Indentation:</strong> Normalize indentation to 4 spaces (the Python standard) for syntactically correct, readable code</li>
                <li><strong>Operator Spacing:</strong> Add proper spaces around operators, after commas, and in function definitions</li>
                <li><strong>File Upload Support:</strong> Upload .py files directly from your computer or drag and drop them</li>
                <li><strong>One-Click Copy:</strong> Instantly copy the formatted output to your clipboard</li>
                <li><strong>Download Output:</strong> Save the formatted Python as a .py file to your computer</li>
                <li><strong>Real-Time Processing:</strong> Instant formatting without page reloads or server round-trips</li>
                <li><strong>Privacy First:</strong> 100% client-side processing—your Python code never leaves your browser</li>
            </ul>

            <h3>How to Use This Tool</h3>

            <p><strong>Method 1: Paste Python Code</strong></p>
            <ol>
                <li>Copy your Python code from your editor, Jupyter notebook, or script file</li>
                <li>Paste it into the input text area on the left side</li>
                <li>Click "Format" to apply PEP 8 formatting</li>
                <li>The formatted output appears instantly in the output area on the right</li>
                <li>Copy or download the result as needed</li>
            </ol>

            <p><strong>Method 2: Upload a Python File</strong></p>
            <ol>
                <li>Click the "Upload" button or drag and drop your .py file into the designated area</li>
                <li>The file content will automatically load into the input area</li>
                <li>Format as needed, then use the "Download" button to save the result</li>
            </ol>

            <h3>Common Use Cases</h3>

            <p><strong>Cleaning Up Jupyter Notebook Code</strong></p>
            <p>Code developed in Jupyter notebooks often has inconsistent formatting—cells are run in different orders, indentation gets mixed up from copying and pasting, and quick experiments leave behind messy code. Before extracting notebook code into a proper Python module or script, use this formatter to clean up the indentation and style. This makes the transition from notebook to production-ready code much smoother.</p>

            <p><strong>Preparing Code for Pull Requests</strong></p>
            <p>Most Python projects enforce PEP 8 compliance through linters and CI checks (flake8, pylint, black). Before submitting a pull request, run your code through this formatter to ensure it meets the project's style requirements. This prevents CI failures due to style violations and reduces the back-and-forth in code reviews over trivial formatting issues.</p>

            <p><strong>Learning and Teaching Python</strong></p>
            <p>Python's indentation rules can be confusing for beginners, and seeing correctly formatted code helps build good habits. When teaching Python or reviewing student code, use this formatter to show the correct structure. Consistently formatted examples make it easier to explain control flow, function definitions, and class structure without students being confused by inconsistent whitespace.</p>

            <h3>Tips &amp; Best Practices</h3>
            <ul>
                <li><strong>Always use 4-space indentation:</strong> Python's PEP 8 standard specifies exactly 4 spaces for indentation—using 2 spaces or tabs may work syntactically but violates the community standard and causes issues with many tools</li>
                <li><strong>Keep lines under 79 characters:</strong> PEP 8 recommends maximum line length of 79 characters for code and 72 for docstrings—long lines should be broken up using Python's implicit line continuation or backslash continuation</li>
                <li><strong>Use meaningful blank lines:</strong> Separate top-level function and class definitions with two blank lines, and method definitions within a class with one blank line—this visual separation helps readers understand code structure</li>
                <li><strong>Format before committing:</strong> Consider using automated formatters like Black or autopep8 in your pre-commit hooks to automatically enforce consistent formatting across your entire team</li>
            </ul>

            <h3>Frequently Asked Questions</h3>

            <p><strong>Q: Is my Python code safe when using this tool?</strong></p>
            <p>A: Yes, absolutely! All Python formatting happens entirely in your browser using JavaScript. Your code—including any API keys, database connection strings, or proprietary algorithms—never leaves your computer and is never uploaded to any server. This makes our tool safe for formatting sensitive scripts and internal applications.</p>

            <p><strong>Q: Does this tool format Python 2 and Python 3 code?</strong></p>
            <p>A: Yes, this formatter handles both Python 2 and Python 3 syntax. The formatting rules applied follow PEP 8, which applies to both versions. However, this tool focuses on indentation and spacing rather than converting between Python 2 and 3 syntax—it will not automatically update print statements, division operators, or other Python 2/3 incompatibilities.</p>

            <p><strong>Q: How is this different from Black or autopep8?</strong></p>
            <p>A: Black and autopep8 are command-line tools that you install and run locally on your machine. This tool requires no installation—just paste your code in the browser and format instantly. It is ideal for quick formatting tasks, sharing code snippets, and situations where you do not have access to your local development environment.</p>

            <p><strong>Q: Do I need to create an account or sign up?</strong></p>
            <p>A: No! All our tools are completely free and don't require any registration, sign-up, or account creation. Just visit the page and start using the Python formatter immediately. There are no limits on usage, no premium tiers, and no hidden fees.</p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Code Utils. All rights reserved.</p>
        <p>Free developer utilities - 100% client-side processing</p>
    </footer>

    <script src="js/common.js"></script>
    <script>
        CodeUtils.RecentTools.add({
            id: 'python-formatter',
            name: 'Python Formatter',
            url: 'python-formatter.html'
        });

        CodeUtils.Message.init('message');

        const INDENT_KEYWORDS = ['def ', 'class ', 'if ', 'elif ', 'else:', 'for ', 'while ', 'try:', 'except', 'finally:', 'with ', 'async def ', 'async for ', 'async with '];
        const DEDENT_KEYWORDS = ['return', 'break', 'continue', 'raise', 'pass'];

        function formatPython() {
            const input = document.getElementById('pythonInput').value;
            if (!input.trim()) {
                CodeUtils.Message.error('Please enter Python code');
                return;
            }

            const indentSize = document.getElementById('indentSize').value;
            const addBlankLines = document.getElementById('addBlankLines').checked;
            const indent = indentSize === 'tab' ? '\t' : ' '.repeat(parseInt(indentSize));

            try {
                const formatted = formatPythonCode(input, indent, addBlankLines);
                document.getElementById('pythonOutput').value = formatted;
                CodeUtils.Message.success('Python formatted!');
            } catch (e) {
                CodeUtils.Message.error('Error formatting Python: ' + e.message);
            }
        }

        function formatPythonCode(code, indent, addBlankLines) {
            // Normalize line endings
            code = code.replace(/\r\n/g, '\n').replace(/\r/g, '\n');

            const lines = code.split('\n');
            const formattedLines = [];
            let indentLevel = 0;
            let prevWasFunction = false;
            let inMultilineString = false;
            let multilineStringChar = '';

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i];
                let trimmed = line.trim();

                // Handle empty lines
                if (!trimmed) {
                    formattedLines.push('');
                    continue;
                }

                // Handle multiline strings
                if (inMultilineString) {
                    formattedLines.push(line); // Keep original formatting in multiline strings
                    if (trimmed.includes(multilineStringChar)) {
                        inMultilineString = false;
                    }
                    continue;
                }

                // Check for multiline string start
                if (trimmed.includes('"""') || trimmed.includes("'''")) {
                    const tripleDouble = (trimmed.match(/\"\"\"/g) || []).length;
                    const tripleSingle = (trimmed.match(/\'\'\'/g) || []).length;

                    if (tripleDouble % 2 === 1) {
                        inMultilineString = true;
                        multilineStringChar = '"""';
                    } else if (tripleSingle % 2 === 1) {
                        inMultilineString = true;
                        multilineStringChar = "'''";
                    }
                }

                // Handle comments
                if (trimmed.startsWith('#')) {
                    formattedLines.push(indent.repeat(indentLevel) + trimmed);
                    continue;
                }

                // Add blank lines before function/class definitions
                if (addBlankLines && (trimmed.startsWith('def ') || trimmed.startsWith('class ') || trimmed.startsWith('async def '))) {
                    if (formattedLines.length > 0 && formattedLines[formattedLines.length - 1].trim() !== '') {
                        // Add two blank lines before top-level, one before methods
                        if (indentLevel === 0 && !prevWasFunction) {
                            formattedLines.push('');
                            formattedLines.push('');
                        } else if (!prevWasFunction) {
                            formattedLines.push('');
                        }
                    }
                    prevWasFunction = true;
                } else {
                    prevWasFunction = false;
                }

                // Check for dedent keywords at start
                if (trimmed === 'else:' || trimmed.startsWith('elif ') ||
                    trimmed.startsWith('except') || trimmed === 'finally:') {
                    indentLevel = Math.max(0, indentLevel - 1);
                }

                // Format the line
                formattedLines.push(indent.repeat(indentLevel) + trimmed);

                // Check if line ends with colon (new block)
                if (trimmed.endsWith(':') && !trimmed.startsWith('#')) {
                    indentLevel++;
                }

                // Check for dedent after certain keywords
                for (const keyword of DEDENT_KEYWORDS) {
                    if (trimmed === keyword || trimmed.startsWith(keyword + ' ')) {
                        // Next line should have same or less indent
                        break;
                    }
                }
            }

            return formattedLines.join('\n');
        }

        function copyOutput() {
            const output = document.getElementById('pythonOutput').value;
            if (!output) {
                CodeUtils.Message.error('Nothing to copy');
                return;
            }
            CodeUtils.Clipboard.copy(output);
            CodeUtils.Message.success('Copied!');
        }

        function downloadPython() {
            const output = document.getElementById('pythonOutput').value;
            if (!output) {
                CodeUtils.Message.error('Nothing to download');
                return;
            }
            CodeUtils.FileHandler.download(output, 'formatted.py', 'text/x-python');
            CodeUtils.Message.success('Downloaded!');
        }

        function clearAll() {
            document.getElementById('pythonInput').value = '';
            document.getElementById('pythonOutput').value = '';
        }
    </script>
</body>
</html>
